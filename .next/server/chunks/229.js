exports.id=229,exports.ids=[229],exports.modules={57803:(e,s,r)=>{Promise.resolve().then(r.bind(r,21992))},57123:(e,s,r)=>{Promise.resolve().then(r.bind(r,55748))},44231:(e,s,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.d(s,{A:()=>S});var a=r(45512),l=r(81846),n=r(87021),c=r(97643),i=r(71965),o=r(12952),d=r(61366),m=r(25409),u=r(51844),x=r(41692),h=r(27953),j=r(81914),p=r(30788),f=r(80765),g=r(8812),v=r(61606),N=r(44269),w=r(58009),b=r(6868),C=r(91542),y=r(16131),A=e([x,h,f,g]);[x,h,f,g]=A.then?(await A)():A;let M=y.z.object({name:y.z.string().min(1,{message:"Write something"}).max(50),members:y.z.string().array().min(1,{message:"You should select at least one friend"}).max(1e3)}),S=()=>{let e=(0,f.useQuery)(x.F.friends.get),{mutate:s,pending:r}=(0,h.S)(x.F.conversation.createGroup),t=(0,b.mN)({resolver:(0,j.u)(M),defaultValues:{name:"",members:[]}}),y=t.watch("members",[]),A=(0,w.useMemo)(()=>e?e.filter(e=>!y.includes(e._id)):[],[y,e]),S=async e=>{try{await s(e),t.reset(),C.oR.success("Group Created Successfully!")}catch(e){C.oR.error(e instanceof g.ConvexError?e.data:"Failed to create group, please try again!")}};return(0,a.jsxs)(i.lG,{children:[(0,a.jsxs)(u.m_,{children:[(0,a.jsx)(u.k$,{children:(0,a.jsx)(i.zM,{asChild:!0,children:(0,a.jsx)(n.$,{size:"icon",variant:"outline",children:(0,a.jsx)(v.A,{})})})}),(0,a.jsx)(u.ZI,{children:(0,a.jsx)("p",{children:"Create New Group"})})]}),(0,a.jsxs)(i.Cf,{className:"block bg-white",children:[(0,a.jsxs)(i.c7,{children:[(0,a.jsx)(i.L3,{children:(0,a.jsx)("p",{className:"text-center",children:"Create a New Group"})}),(0,a.jsx)(p.rr,{children:(0,a.jsx)("p",{className:"text-center",children:"Create a new group with your friends to share messages, files, and more."})})]}),(0,a.jsx)(d.lV,{...t,children:(0,a.jsxs)("form",{onSubmit:t.handleSubmit(S),className:"space-y-8 mt-4",children:[(0,a.jsx)(d.zB,{control:t.control,name:"name",render:({field:e})=>(0,a.jsxs)(d.eI,{children:[(0,a.jsx)(d.lR,{children:"Name"}),(0,a.jsx)(d.MJ,{children:(0,a.jsx)(m.p,{placeholder:"Enter the group name...",...e,className:"border-orange-600"})}),(0,a.jsx)(d.C5,{})]})}),(0,a.jsx)(d.zB,{control:t.control,name:"members",render:()=>(0,a.jsxs)(d.eI,{children:[(0,a.jsx)(d.lR,{children:"Friends"}),(0,a.jsx)(d.MJ,{children:(0,a.jsxs)(o.rI,{children:[(0,a.jsx)(o.ty,{asChild:!0,disabled:0===A.length,children:(0,a.jsx)(n.$,{className:"w-full border-orange-600",variant:"outline",children:"Select"})}),(0,a.jsx)(o.SQ,{className:"w-full",children:A.map(e=>(0,a.jsxs)(o.hO,{className:"flex p-2 items-center gap-4 w-full",onCheckedChange:s=>{s&&t.setValue("members",[...y,e._id])},children:[(0,a.jsxs)(l.eu,{className:"w-8 h-8",children:[(0,a.jsx)(l.BK,{src:e.imageUrl}),(0,a.jsxs)(l.q5,{children:[e.username[0],e.username.length>1?e.username[1]:""]})]}),(0,a.jsx)("h4",{className:"truncate",children:e.username})]},e._id))})]})}),(0,a.jsx)(d.C5,{})]})}),y&&y.length?(0,a.jsx)(c.Zp,{className:"flex items-center gap-3 overflow-auto w-full h-24 no-scrollbar p-2",children:e?.filter(e=>y.includes(e._id)).map(e=>a.jsxs("div",{className:"flex flex-col items-center gap-1",children:[a.jsxs("div",{className:"relative",children:[a.jsxs(l.eu,{children:[a.jsx(l.BK,{src:e.imageUrl}),a.jsxs(l.q5,{children:[e.username[0],e.username.length>1?e.username[1]:""]})]}),a.jsx(N.A,{className:"text-muted-foreground w-4 h-4 absolute bottom-8 left-7 bg-muted rounded-full cursor-pointer",onClick:()=>t.setValue("members",y.filter(s=>s!==e._id))})]}),a.jsxs("p",{className:"truncate text-sm",children:[" ",e.username.split(" ")[0]]})]},e._id))}):null,(0,a.jsxs)(i.Es,{children:[(0,a.jsx)(n.$,{variant:"default",type:"submit",disabled:r,className:"w-full",children:"Create Group"}),(0,a.jsx)(n.$,{variant:"outline",disabled:r,className:"w-full",children:"Cancel"})]})]})})]})]})};t()}catch(e){t(e)}})},30541:(e,s,r)=>{"use strict";r.d(s,{A:()=>d});var t=r(45512),a=r(81846),l=r(77252),n=r(97643),c=r(87798),i=r(28531),o=r.n(i);r(58009);let d=({id:e,imageUrl:s,unseenCount:r,username:i,lastMessageContent:d,lastMessageSender:m})=>(0,t.jsx)(o(),{href:`/conversations/${e}`,className:"w-full",children:(0,t.jsxs)(n.Zp,{className:"p-2 flex flex-row items-center gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4 truncate ",children:[(0,t.jsxs)(a.eu,{className:"shadow-lg",children:[(0,t.jsx)(a.BK,{src:s,alt:"avatar"}),(0,t.jsx)(a.q5,{children:(0,t.jsx)(c.A,{})})]}),(0,t.jsxs)("div",{className:"flex flex-col truncate",children:[(0,t.jsx)("h4",{className:"truncate",children:i}),m&&m?(0,t.jsxs)("span",{className:"text-sm text-muted-foreground flex truncate overflow-ellipsis",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[m," :","\xa0"]}),(0,t.jsx)("p",{className:"truncate overflow-ellipsis",children:d})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"Start the conversation!"})]})]}),r?(0,t.jsxs)(l.E,{children:[" ",r]}):null]})})},25991:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var t=r(45512),a=r(81846),l=r(77252),n=r(97643),c=r(28531),i=r.n(c);r(58009);let o=({id:e,name:s,unseenCount:r,lastMessageContent:c,lastMessageSender:o})=>(0,t.jsx)(i(),{href:`/conversations/${e}`,className:"w-full",children:(0,t.jsxs)(n.Zp,{className:"p-2 flex flex-row items-center gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center gap-4 truncate ",children:[(0,t.jsx)(a.eu,{className:"shadow-lg",children:(0,t.jsx)(a.q5,{children:s.charAt(0).toLocaleUpperCase()})}),(0,t.jsxs)("div",{className:"flex flex-col truncate",children:[(0,t.jsx)("h4",{className:"truncate",children:s}),o&&o?(0,t.jsxs)("span",{className:"text-sm text-muted-foreground flex truncate overflow-ellipsis",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[o," :","\xa0"]}),(0,t.jsx)("p",{className:"truncate overflow-ellipsis",children:c})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"Start the conversation!"})]})]}),r?(0,t.jsxs)(l.E,{children:[" ",r]}):null]})})},55748:(e,s,r)=>{"use strict";r.a(e,async(e,t)=>{try{r.r(s),r.d(s,{default:()=>x});var a=r(45512),l=r(51458),n=r(41692),c=r(80765),i=r(86235);r(58009);var o=r(30541),d=r(25991),m=r(44231),u=e([n,c,m]);[n,c,m]=u.then?(await u)():u;let x=({children:e})=>{let s=(0,c.useQuery)(n.F.conversations.get),r=!s,t=Array.isArray(s)&&s.length>0;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{title:"Conversations",action:(0,a.jsx)(m.A,{}),children:r?(0,a.jsx)(i.A,{children:(0,a.jsx)("p",{children:"Loading..."})}):t?s.map(e=>e.conversation.isGroup?(0,a.jsx)(o.A,{id:e.conversation._id,username:e.otherMember?.username||"",imageUrl:e.otherMember?.imageUrl||"",lastMessageContent:e.lastMessage?.content,lastMessageSender:e.lastMessage?.sender,unseenCount:e.unSeenCount},e.conversation._id):(0,a.jsx)(d.A,{id:e.conversation._id,name:e.conversation.name||"",lastMessageContent:e.lastMessage?.content,lastMessageSender:e.lastMessage?.sender,unseenCount:e.unSeenCount},e.conversation._id)):(0,a.jsx)("p",{className:"w-full h-full flex items-center justify-center",children:"No Conversation Found"})}),e]})};t()}catch(e){t(e)}})},61606:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(41680).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},21992:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\web devolper\\\\Chat-app\\\\chat-app\\\\app\\\\(root)\\\\conversations\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\web devolper\\Chat-app\\chat-app\\app\\(root)\\conversations\\layout.tsx","default")}};