exports.id=229,exports.ids=[229],exports.modules={57803:(e,s,r)=>{Promise.resolve().then(r.bind(r,21992))},57123:(e,s,r)=>{Promise.resolve().then(r.bind(r,3958))},3958:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>I});var l=r(45512),t=r(51458),a=r(41692),n=r(1799),c=r(86235),i=r(58009),o=r(81846),d=r(77252),m=r(97643),x=r(87798),h=r(28531),u=r.n(h);let j=({id:e,imageUrl:s,unseenCount:r,username:t,lastMessageContent:a,lastMessageSender:n})=>(0,l.jsx)(u(),{href:`/conversations/${e}`,className:"w-full",children:(0,l.jsxs)(m.Zp,{className:"p-2 flex flex-row items-center gap-4 justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-4 truncate ",children:[(0,l.jsxs)(o.eu,{className:"shadow-lg",children:[(0,l.jsx)(o.BK,{src:s,alt:"avatar"}),(0,l.jsx)(o.q5,{children:(0,l.jsx)(x.A,{})})]}),(0,l.jsxs)("div",{className:"flex flex-col truncate",children:[(0,l.jsx)("h4",{className:"truncate",children:t}),n&&n?(0,l.jsxs)("span",{className:"text-sm text-muted-foreground flex truncate overflow-ellipsis",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[n," :","\xa0"]}),(0,l.jsx)("p",{className:"truncate overflow-ellipsis",children:a})]}):(0,l.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"Start the conversation!"})]})]}),r?(0,l.jsxs)(d.E,{children:[" ",r]}):null]})}),p=({id:e,name:s,unseenCount:r,lastMessageContent:t,lastMessageSender:a})=>(0,l.jsx)(u(),{href:`/conversations/${e}`,className:"w-full",children:(0,l.jsxs)(m.Zp,{className:"p-2 flex flex-row items-center gap-4 justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-row items-center gap-4 truncate ",children:[(0,l.jsx)(o.eu,{className:"shadow-lg",children:(0,l.jsx)(o.q5,{children:s.charAt(0).toLocaleUpperCase()})}),(0,l.jsxs)("div",{className:"flex flex-col truncate",children:[(0,l.jsx)("h4",{className:"truncate",children:s}),a&&a?(0,l.jsxs)("span",{className:"text-sm text-muted-foreground flex truncate overflow-ellipsis",children:[(0,l.jsxs)("p",{className:"font-semibold",children:[a," :","\xa0"]}),(0,l.jsx)("p",{className:"truncate overflow-ellipsis",children:t})]}):(0,l.jsx)("p",{className:"text-sm text-muted-foreground truncate",children:"Start the conversation!"})]})]}),r?(0,l.jsxs)(d.E,{children:[" ",r]}):null]})});var f=r(87021),g=r(71965),v=r(12952),N=r(61366),w=r(25409),b=r(51844),C=r(27953),y=r(81914),M=r(30788),S=r(96116);let _=(0,r(41680).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);var k=r(44269),A=r(6868),z=r(91542),E=r(16131);let F=E.z.object({name:E.z.string().min(1,{message:"Write something"}).max(50),members:E.z.string().array().min(1,{message:"You should select at least one friend"}).max(1e3)}),G=()=>{let e=(0,n.IT)(a.F.friends.get),{mutate:s,pending:r}=(0,C.S)(a.F.conversation.createGroup),t=(0,A.mN)({resolver:(0,y.u)(F),defaultValues:{name:"",members:[]}}),c=t.watch("members",[]),d=(0,i.useMemo)(()=>e?e.filter(e=>!c.includes(e._id)):[],[c,e]),x=async e=>{try{await s(e),t.reset(),z.oR.success("Group Created Successfully!")}catch(e){z.oR.error(e instanceof S.ik?e.data:"Failed to create group, please try again!")}};return(0,l.jsxs)(g.lG,{children:[(0,l.jsxs)(b.m_,{children:[(0,l.jsx)(b.k$,{children:(0,l.jsx)(g.zM,{asChild:!0,children:(0,l.jsx)(f.$,{size:"icon",variant:"outline",children:(0,l.jsx)(_,{})})})}),(0,l.jsx)(b.ZI,{children:(0,l.jsx)("p",{children:"Create New Group"})})]}),(0,l.jsxs)(g.Cf,{className:"block bg-white",children:[(0,l.jsxs)(g.c7,{children:[(0,l.jsx)(g.L3,{children:(0,l.jsx)("p",{className:"text-center",children:"Create a New Group"})}),(0,l.jsx)(M.rr,{children:(0,l.jsx)("p",{className:"text-center",children:"Create a new group with your friends to share messages, files, and more."})})]}),(0,l.jsx)(N.lV,{...t,children:(0,l.jsxs)("form",{onSubmit:t.handleSubmit(x),className:"space-y-8 mt-4",children:[(0,l.jsx)(N.zB,{control:t.control,name:"name",render:({field:e})=>(0,l.jsxs)(N.eI,{children:[(0,l.jsx)(N.lR,{children:"Name"}),(0,l.jsx)(N.MJ,{children:(0,l.jsx)(w.p,{placeholder:"Enter the group name...",...e,className:"border-orange-600"})}),(0,l.jsx)(N.C5,{})]})}),(0,l.jsx)(N.zB,{control:t.control,name:"members",render:()=>(0,l.jsxs)(N.eI,{children:[(0,l.jsx)(N.lR,{children:"Friends"}),(0,l.jsx)(N.MJ,{children:(0,l.jsxs)(v.rI,{children:[(0,l.jsx)(v.ty,{asChild:!0,disabled:0===d.length,children:(0,l.jsx)(f.$,{className:"w-full border-orange-600",variant:"outline",children:"Select"})}),(0,l.jsx)(v.SQ,{className:"w-full",children:d.map(e=>(0,l.jsxs)(v.hO,{className:"flex p-2 items-center gap-4 w-full",onCheckedChange:s=>{s&&t.setValue("members",[...c,e._id])},children:[(0,l.jsxs)(o.eu,{className:"w-8 h-8",children:[(0,l.jsx)(o.BK,{src:e.imageUrl}),(0,l.jsxs)(o.q5,{children:[e.username[0],e.username.length>1?e.username[1]:""]})]}),(0,l.jsx)("h4",{className:"truncate",children:e.username})]},e._id))})]})}),(0,l.jsx)(N.C5,{})]})}),c&&c.length?(0,l.jsx)(m.Zp,{className:"flex items-center gap-3 overflow-auto w-full h-24 no-scrollbar p-2",children:e?.filter(e=>c.includes(e._id)).map(e=>l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsxs("div",{className:"relative",children:[l.jsxs(o.eu,{children:[l.jsx(o.BK,{src:e.imageUrl}),l.jsxs(o.q5,{children:[e.username[0],e.username.length>1?e.username[1]:""]})]}),l.jsx(k.A,{className:"text-muted-foreground w-4 h-4 absolute bottom-8 left-7 bg-muted rounded-full cursor-pointer",onClick:()=>t.setValue("members",c.filter(s=>s!==e._id))})]}),l.jsxs("p",{className:"truncate text-sm",children:[" ",e.username.split(" ")[0]]})]},e._id))}):null,(0,l.jsxs)(g.Es,{children:[(0,l.jsx)(f.$,{variant:"default",type:"submit",disabled:r,className:"w-full",children:"Create Group"}),(0,l.jsx)(f.$,{variant:"outline",disabled:r,className:"w-full",children:"Cancel"})]})]})})]})]})},I=({children:e})=>{let s=(0,n.IT)(a.F.conversations.get),r=!s,i=Array.isArray(s)&&s.length>0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.A,{title:"Conversations",action:(0,l.jsx)(G,{}),children:r?(0,l.jsx)(c.A,{children:(0,l.jsx)("p",{children:"Loading..."})}):i?s.map(e=>e.conversation.isGroup?(0,l.jsx)(j,{id:e.conversation._id,username:e.otherMember?.username||"",imageUrl:e.otherMember?.imageUrl||"",lastMessageContent:e.lastMessage?.content,lastMessageSender:e.lastMessage?.sender,unseenCount:e.unSeenCount},e.conversation._id):(0,l.jsx)(p,{id:e.conversation._id,name:e.conversation.name||"",lastMessageContent:e.lastMessage?.content,lastMessageSender:e.lastMessage?.sender,unseenCount:e.unSeenCount},e.conversation._id)):(0,l.jsx)("p",{className:"w-full h-full flex items-center justify-center",children:"No Conversation Found"})}),e]})}},21992:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>l});let l=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\web devolper\\\\Chat-app\\\\chat-app\\\\app\\\\(root)\\\\conversations\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\web devolper\\Chat-app\\chat-app\\app\\(root)\\conversations\\layout.tsx","default")}};