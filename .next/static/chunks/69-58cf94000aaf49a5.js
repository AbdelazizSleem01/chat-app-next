"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{6046:(e,t,n)=>{var r=n(6658);n.o(r,"useParams")&&n.d(t,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},3610:(e,t,n)=>{n.d(t,{m:()=>r});function r(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e?.(r),!1===n||!r.defaultPrevented)return t?.(r)}}},8068:(e,t,n)=>{n.d(t,{s:()=>s,t:()=>i});var r=n(2115);function i(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}function s(...e){return r.useCallback(i(...e),e)}},8166:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(2115),i=n(5155);function s(e,t=[]){let n=[],o=()=>{let t=n.map(e=>r.createContext(e));return function(n){let i=n?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...n,[e]:i}}),[n,i])}};return o.scopeName=e,[function(t,s){let o=r.createContext(s),a=n.length;function u(t){let{scope:n,children:s,...u}=t,l=n?.[e][a]||o,c=r.useMemo(()=>u,Object.values(u));return(0,i.jsx)(l.Provider,{value:c,children:s})}return n=[...n,s],u.displayName=t+"Provider",[u,function(n,i){let u=i?.[e][a]||o,l=r.useContext(u);if(l)return l;if(void 0!==s)return s;throw Error(`\`${n}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let i=n.reduce((t,{useScope:n,scopeName:r})=>{let i=n(e)[`__scope${r}`];return{...t,...i}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}(o,...t)]}},7668:(e,t,n)=>{n.d(t,{B:()=>u});var r,i=n(2115),s=n(6611),o=(r||(r=n.t(i,2)))["useId".toString()]||(()=>void 0),a=0;function u(e){let[t,n]=i.useState(o());return(0,s.N)(()=>{e||n(e=>e??String(a++))},[e]),e||(t?`radix-${t}`:"")}},905:(e,t,n)=>{n.d(t,{Mz:()=>eJ,i3:()=>eZ,UC:()=>eG,bL:()=>eH,Bk:()=>eL});var r=n(2115);let i=["top","right","bottom","left"],s=Math.min,o=Math.max,a=Math.round,u=Math.floor,l=e=>({x:e,y:e}),c={left:"right",right:"left",bottom:"top",top:"bottom"},h={start:"end",end:"start"};function d(e,t){return"function"==typeof e?e(t):e}function f(e){return e.split("-")[0]}function p(e){return e.split("-")[1]}function g(e){return"x"===e?"y":"x"}function y(e){return"y"===e?"height":"width"}function m(e){return["top","bottom"].includes(f(e))?"y":"x"}function v(e){return e.replace(/start|end/g,e=>h[e])}function w(e){return e.replace(/left|right|bottom|top/g,e=>c[e])}function b(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function x(e){let{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function S(e,t,n){let r,{reference:i,floating:s}=e,o=m(t),a=g(m(t)),u=y(a),l=f(t),c="y"===o,h=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,v=i[u]/2-s[u]/2;switch(l){case"top":r={x:h,y:i.y-s.height};break;case"bottom":r={x:h,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:d};break;case"left":r={x:i.x-s.width,y:d};break;default:r={x:i.x,y:i.y}}switch(p(t)){case"start":r[a]-=v*(n&&c?-1:1);break;case"end":r[a]+=v*(n&&c?-1:1)}return r}let k=async(e,t,n)=>{let{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await (null==o.isRTL?void 0:o.isRTL(t)),l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:h}=S(l,r,u),d=r,f={},p=0;for(let n=0;n<a.length;n++){let{name:s,fn:g}=a[n],{x:y,y:m,data:v,reset:w}=await g({x:c,y:h,initialPlacement:r,placement:d,strategy:i,middlewareData:f,rects:l,platform:o,elements:{reference:e,floating:t}});c=null!=y?y:c,h=null!=m?m:h,f={...f,[s]:{...f[s],...v}},w&&p<=50&&(p++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(l=!0===w.rects?await o.getElementRects({reference:e,floating:t,strategy:i}):w.rects),{x:c,y:h}=S(l,d,u)),n=-1)}return{x:c,y:h,placement:d,strategy:i,middlewareData:f}};async function R(e,t){var n;void 0===t&&(t={});let{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:h="floating",altBoundary:f=!1,padding:p=0}=d(t,e),g=b(p),y=a[f?"floating"===h?"reference":"floating":h],m=x(await s.getClippingRect({element:null==(n=await (null==s.isElement?void 0:s.isElement(y)))||n?y:y.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v="floating"===h?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await (null==s.getOffsetParent?void 0:s.getOffsetParent(a.floating)),S=await (null==s.isElement?void 0:s.isElement(w))&&await (null==s.getScale?void 0:s.getScale(w))||{x:1,y:1},k=x(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:w,strategy:u}):v);return{top:(m.top-k.top+g.top)/S.y,bottom:(k.bottom-m.bottom+g.bottom)/S.y,left:(m.left-k.left+g.left)/S.x,right:(k.right-m.right+g.right)/S.x}}function A(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function C(e){return i.some(t=>e[t]>=0)}async function T(e,t){let{placement:n,platform:r,elements:i}=e,s=await (null==r.isRTL?void 0:r.isRTL(i.floating)),o=f(n),a=p(n),u="y"===m(n),l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,h=d(t,e),{mainAxis:g,crossAxis:y,alignmentAxis:v}="number"==typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return a&&"number"==typeof v&&(y="end"===a?-1*v:v),u?{x:y*c,y:g*l}:{x:g*l,y:y*c}}function E(){return"undefined"!=typeof window}function O(e){return M(e)?(e.nodeName||"").toLowerCase():"#document"}function q(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function L(e){var t;return null==(t=(M(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function M(e){return!!E()&&(e instanceof Node||e instanceof q(e).Node)}function P(e){return!!E()&&(e instanceof Element||e instanceof q(e).Element)}function I(e){return!!E()&&(e instanceof HTMLElement||e instanceof q(e).HTMLElement)}function j(e){return!!E()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof q(e).ShadowRoot)}function $(e){let{overflow:t,overflowX:n,overflowY:r,display:i}=_(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function N(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(e){return!1}})}function V(e){let t=Q(),n=P(e)?_(e):e;return"none"!==n.transform||"none"!==n.perspective||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","perspective","filter"].some(e=>(n.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(n.contain||"").includes(e))}function Q(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function D(e){return["html","body","#document"].includes(O(e))}function _(e){return q(e).getComputedStyle(e)}function F(e){return P(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function B(e){if("html"===O(e))return e;let t=e.assignedSlot||e.parentNode||j(e)&&e.host||L(e);return j(t)?t.host:t}function W(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let i=function e(t){let n=B(t);return D(n)?t.ownerDocument?t.ownerDocument.body:t.body:I(n)&&$(n)?n:e(n)}(e),s=i===(null==(r=e.ownerDocument)?void 0:r.body),o=q(i);if(s){let e=U(o);return t.concat(o,o.visualViewport||[],$(i)?i:[],e&&n?W(e):[])}return t.concat(i,W(i,[],n))}function U(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function z(e){let t=_(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=I(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,u=a(n)!==s||a(r)!==o;return u&&(n=s,r=o),{width:n,height:r,$:u}}function H(e){return P(e)?e:e.contextElement}function J(e){let t=H(e);if(!I(t))return l(1);let n=t.getBoundingClientRect(),{width:r,height:i,$:s}=z(t),o=(s?a(n.width):n.width)/r,u=(s?a(n.height):n.height)/i;return o&&Number.isFinite(o)||(o=1),u&&Number.isFinite(u)||(u=1),{x:o,y:u}}let G=l(0);function Z(e){let t=q(e);return Q()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:G}function X(e,t,n,r){var i;void 0===t&&(t=!1),void 0===n&&(n=!1);let s=e.getBoundingClientRect(),o=H(e),a=l(1);t&&(r?P(r)&&(a=J(r)):a=J(e));let u=(void 0===(i=n)&&(i=!1),r&&(!i||r===q(o))&&i)?Z(o):l(0),c=(s.left+u.x)/a.x,h=(s.top+u.y)/a.y,d=s.width/a.x,f=s.height/a.y;if(o){let e=q(o),t=r&&P(r)?q(r):r,n=e,i=U(n);for(;i&&r&&t!==n;){let e=J(i),t=i.getBoundingClientRect(),r=_(i),s=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,o=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;c*=e.x,h*=e.y,d*=e.x,f*=e.y,c+=s,h+=o,i=U(n=q(i))}}return x({width:d,height:f,x:c,y:h})}function Y(e,t){let n=F(e).scrollLeft;return t?t.left+n:X(L(e)).left+n}function K(e,t,n){void 0===n&&(n=!1);let r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:Y(e,r)),y:r.top+t.scrollTop}}function ee(e,t,n){let r;if("viewport"===t)r=function(e,t){let n=q(e),r=L(e),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;let e=Q();(!e||e&&"fixed"===t)&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}(e,n);else if("document"===t)r=function(e){let t=L(e),n=F(e),r=e.ownerDocument.body,i=o(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=o(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+Y(e),u=-n.scrollTop;return"rtl"===_(r).direction&&(a+=o(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:a,y:u}}(L(e));else if(P(t))r=function(e,t){let n=X(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=I(e)?J(e):l(1),o=e.clientWidth*s.x;return{width:o,height:e.clientHeight*s.y,x:i*s.x,y:r*s.y}}(t,n);else{let n=Z(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return x(r)}function et(e){return"static"===_(e).position}function en(e,t){if(!I(e)||"fixed"===_(e).position)return null;if(t)return t(e);let n=e.offsetParent;return L(e)===n&&(n=n.ownerDocument.body),n}function er(e,t){let n=q(e);if(N(e))return n;if(!I(e)){let t=B(e);for(;t&&!D(t);){if(P(t)&&!et(t))return t;t=B(t)}return n}let r=en(e,t);for(;r&&["table","td","th"].includes(O(r))&&et(r);)r=en(r,t);return r&&D(r)&&et(r)&&!V(r)?n:r||function(e){let t=B(e);for(;I(t)&&!D(t);){if(V(t))return t;if(N(t))break;t=B(t)}return null}(e)||n}let ei=async function(e){let t=this.getOffsetParent||er,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=I(t),i=L(t),s="fixed"===n,o=X(e,!0,s,t),a={scrollLeft:0,scrollTop:0},u=l(0);if(r||!r&&!s){if(("body"!==O(t)||$(i))&&(a=F(t)),r){let e=X(t,!0,s,t);u.x=e.x+t.clientLeft,u.y=e.y+t.clientTop}else i&&(u.x=Y(i))}let c=!i||r||s?l(0):K(i,a);return{x:o.left+a.scrollLeft-u.x-c.x,y:o.top+a.scrollTop-u.y-c.y,width:o.width,height:o.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},es={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e,s="fixed"===i,o=L(r),a=!!t&&N(t.floating);if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},c=l(1),h=l(0),d=I(r);if((d||!d&&!s)&&(("body"!==O(r)||$(o))&&(u=F(r)),I(r))){let e=X(r);c=J(r),h.x=e.x+r.clientLeft,h.y=e.y+r.clientTop}let f=!o||d||s?l(0):K(o,u,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-u.scrollLeft*c.x+h.x+f.x,y:n.y*c.y-u.scrollTop*c.y+h.y+f.y}},getDocumentElement:L,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e,a=[..."clippingAncestors"===n?N(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=W(e,[],!1).filter(e=>P(e)&&"body"!==O(e)),i=null,s="fixed"===_(e).position,o=s?B(e):e;for(;P(o)&&!D(o);){let t=_(o),n=V(o);n||"fixed"!==t.position||(i=null),(s?!n&&!i:!n&&"static"===t.position&&!!i&&["absolute","fixed"].includes(i.position)||$(o)&&!n&&function e(t,n){let r=B(t);return!(r===n||!P(r)||D(r))&&("fixed"===_(r).position||e(r,n))}(e,o))?r=r.filter(e=>e!==o):i=t,o=B(o)}return t.set(e,r),r}(t,this._c):[].concat(n),r],u=a[0],l=a.reduce((e,n)=>{let r=ee(t,n,i);return e.top=o(r.top,e.top),e.right=s(r.right,e.right),e.bottom=s(r.bottom,e.bottom),e.left=o(r.left,e.left),e},ee(t,u,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:er,getElementRects:ei,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=z(e);return{width:t,height:n}},getScale:J,isElement:P,isRTL:function(e){return"rtl"===_(e).direction}},eo=e=>({name:"arrow",options:e,async fn(t){let{x:n,y:r,placement:i,rects:a,platform:u,elements:l,middlewareData:c}=t,{element:h,padding:f=0}=d(e,t)||{};if(null==h)return{};let v=b(f),w={x:n,y:r},x=g(m(i)),S=y(x),k=await u.getDimensions(h),R="y"===x,A=R?"clientHeight":"clientWidth",C=a.reference[S]+a.reference[x]-w[x]-a.floating[S],T=w[x]-a.reference[x],E=await (null==u.getOffsetParent?void 0:u.getOffsetParent(h)),O=E?E[A]:0;O&&await (null==u.isElement?void 0:u.isElement(E))||(O=l.floating[A]||a.floating[S]);let q=O/2-k[S]/2-1,L=s(v[R?"top":"left"],q),M=s(v[R?"bottom":"right"],q),P=O-k[S]-M,I=O/2-k[S]/2+(C/2-T/2),j=o(L,s(I,P)),$=!c.arrow&&null!=p(i)&&I!==j&&a.reference[S]/2-(I<L?L:M)-k[S]/2<0,N=$?I<L?I-L:I-P:0;return{[x]:w[x]+N,data:{[x]:j,centerOffset:I-j-N,...$&&{alignmentOffset:N}},reset:$}}}),ea=(e,t,n)=>{let r=new Map,i={platform:es,...n},s={...i.platform,_c:r};return k(e,t,{...i,platform:s})};var eu=n(7650),el="undefined"!=typeof document?r.useLayoutEffect:r.useEffect;function ec(e,t){let n,r,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!ec(e[r],t[r]))return!1;return!0}if((n=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!=r--;){let n=i[r];if(("_owner"!==n||!e.$$typeof)&&!ec(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function eh(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ed(e,t){let n=eh(e);return Math.round(t*n)/n}function ef(e){let t=r.useRef(e);return el(()=>{t.current=e}),t}let ep=e=>({name:"arrow",options:e,fn(t){let{element:n,padding:r}="function"==typeof e?e(t):e;return n&&({}).hasOwnProperty.call(n,"current")?null!=n.current?eo({element:n.current,padding:r}).fn(t):{}:n?eo({element:n,padding:r}).fn(t):{}}}),eg=(e,t)=>({...function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;let{x:i,y:s,placement:o,middlewareData:a}=t,u=await T(t,e);return o===(null==(n=a.offset)?void 0:n.placement)&&null!=(r=a.arrow)&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}}(e),options:[e,t]}),ey=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){let{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:u=!1,limiter:l={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...c}=d(e,t),h={x:n,y:r},p=await R(t,c),y=m(f(i)),v=g(y),w=h[v],b=h[y];if(a){let e="y"===v?"top":"left",t="y"===v?"bottom":"right",n=w+p[e],r=w-p[t];w=o(n,s(w,r))}if(u){let e="y"===y?"top":"left",t="y"===y?"bottom":"right",n=b+p[e],r=b-p[t];b=o(n,s(b,r))}let x=l.fn({...t,[v]:w,[y]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[v]:a,[y]:u}}}}}}(e),options:[e,t]}),em=(e,t)=>({...function(e){return void 0===e&&(e={}),{options:e,fn(t){let{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=d(e,t),c={x:n,y:r},h=m(i),p=g(h),y=c[p],v=c[h],w=d(a,t),b="number"==typeof w?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){let e="y"===p?"height":"width",t=s.reference[p]-s.floating[e]+b.mainAxis,n=s.reference[p]+s.reference[e]-b.mainAxis;y<t?y=t:y>n&&(y=n)}if(l){var x,S;let e="y"===p?"width":"height",t=["top","left"].includes(f(i)),n=s.reference[h]-s.floating[e]+(t&&(null==(x=o.offset)?void 0:x[h])||0)+(t?0:b.crossAxis),r=s.reference[h]+s.reference[e]+(t?0:(null==(S=o.offset)?void 0:S[h])||0)-(t?b.crossAxis:0);v<n?v=n:v>r&&(v=r)}return{[p]:y,[h]:v}}}}(e),options:[e,t]}),ev=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r,i,s,o;let{placement:a,middlewareData:u,rects:l,initialPlacement:c,platform:h,elements:b}=t,{mainAxis:x=!0,crossAxis:S=!0,fallbackPlacements:k,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:T=!0,...E}=d(e,t);if(null!=(n=u.arrow)&&n.alignmentOffset)return{};let O=f(a),q=m(c),L=f(c)===c,M=await (null==h.isRTL?void 0:h.isRTL(b.floating)),P=k||(L||!T?[w(c)]:function(e){let t=w(e);return[v(e),t,v(t)]}(c)),I="none"!==C;!k&&I&&P.push(...function(e,t,n,r){let i=p(e),s=function(e,t,n){let r=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":if(n)return t?i:r;return t?r:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(f(e),"start"===n,r);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(v)))),s}(c,T,C,M));let j=[c,...P],$=await R(t,E),N=[],V=(null==(r=u.flip)?void 0:r.overflows)||[];if(x&&N.push($[O]),S){let e=function(e,t,n){void 0===n&&(n=!1);let r=p(e),i=g(m(e)),s=y(i),o="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=w(o)),[o,w(o)]}(a,l,M);N.push($[e[0]],$[e[1]])}if(V=[...V,{placement:a,overflows:N}],!N.every(e=>e<=0)){let e=((null==(i=u.flip)?void 0:i.index)||0)+1,t=j[e];if(t)return{data:{index:e,overflows:V},reset:{placement:t}};let n=null==(s=V.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:s.placement;if(!n)switch(A){case"bestFit":{let e=null==(o=V.filter(e=>{if(I){let t=m(e.placement);return t===q||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(n=e);break}case"initialPlacement":n=c}if(a!==n)return{reset:{placement:n}}}return{}}}}(e),options:[e,t]}),ew=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;let i,a;let{placement:u,rects:l,platform:c,elements:h}=t,{apply:g=()=>{},...y}=d(e,t),v=await R(t,y),w=f(u),b=p(u),x="y"===m(u),{width:S,height:k}=l.floating;"top"===w||"bottom"===w?(i=w,a=b===(await (null==c.isRTL?void 0:c.isRTL(h.floating))?"start":"end")?"left":"right"):(a=w,i="end"===b?"top":"bottom");let A=k-v.top-v.bottom,C=S-v.left-v.right,T=s(k-v[i],A),E=s(S-v[a],C),O=!t.middlewareData.shift,q=T,L=E;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(L=C),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(q=A),O&&!b){let e=o(v.left,0),t=o(v.right,0),n=o(v.top,0),r=o(v.bottom,0);x?L=S-2*(0!==e||0!==t?e+t:o(v.left,v.right)):q=k-2*(0!==n||0!==r?n+r:o(v.top,v.bottom))}await g({...t,availableWidth:L,availableHeight:q});let M=await c.getDimensions(h.floating);return S!==M.width||k!==M.height?{reset:{rects:!0}}:{}}}}(e),options:[e,t]}),eb=(e,t)=>({...function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){let{rects:n}=t,{strategy:r="referenceHidden",...i}=d(e,t);switch(r){case"referenceHidden":{let e=A(await R(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:C(e)}}}case"escaped":{let e=A(await R(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:C(e)}}}default:return{}}}}}(e),options:[e,t]}),ex=(e,t)=>({...ep(e),options:[e,t]});var eS=n(3360),ek=n(5155),eR=r.forwardRef((e,t)=>{let{children:n,width:r=10,height:i=5,...s}=e;return(0,ek.jsx)(eS.sG.svg,{...s,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,ek.jsx)("polygon",{points:"0,0 30,0 15,10"})})});eR.displayName="Arrow";var eA=n(8068),eC=n(8166),eT=n(1524),eE=n(6611),eO="Popper",[eq,eL]=(0,eC.A)(eO),[eM,eP]=eq(eO),eI=e=>{let{__scopePopper:t,children:n}=e,[i,s]=r.useState(null);return(0,ek.jsx)(eM,{scope:t,anchor:i,onAnchorChange:s,children:n})};eI.displayName=eO;var ej="PopperAnchor",e$=r.forwardRef((e,t)=>{let{__scopePopper:n,virtualRef:i,...s}=e,o=eP(ej,n),a=r.useRef(null),u=(0,eA.s)(t,a);return r.useEffect(()=>{o.onAnchorChange((null==i?void 0:i.current)||a.current)}),i?null:(0,ek.jsx)(eS.sG.div,{...s,ref:u})});e$.displayName=ej;var eN="PopperContent",[eV,eQ]=eq(eN),eD=r.forwardRef((e,t)=>{var n,i,a,l,c,h,d,f;let{__scopePopper:p,side:g="bottom",sideOffset:y=0,align:m="center",alignOffset:v=0,arrowPadding:w=0,avoidCollisions:b=!0,collisionBoundary:x=[],collisionPadding:S=0,sticky:k="partial",hideWhenDetached:R=!1,updatePositionStrategy:A="optimized",onPlaced:C,...T}=e,E=eP(eN,p),[O,q]=r.useState(null),M=(0,eA.s)(t,e=>q(e)),[P,I]=r.useState(null),j=function(e){let[t,n]=r.useState(void 0);return(0,eE.N)(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=e.offsetWidth,i=e.offsetHeight;n({width:r,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(P),$=null!==(d=null==j?void 0:j.width)&&void 0!==d?d:0,N=null!==(f=null==j?void 0:j.height)&&void 0!==f?f:0,V="number"==typeof S?S:{top:0,right:0,bottom:0,left:0,...S},Q=Array.isArray(x)?x:[x],D=Q.length>0,_={padding:V,boundary:Q.filter(eW),altBoundary:D},{refs:F,floatingStyles:B,placement:U,isPositioned:z,middlewareData:J}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:n="absolute",middleware:i=[],platform:s,elements:{reference:o,floating:a}={},transform:u=!0,whileElementsMounted:l,open:c}=e,[h,d]=r.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=r.useState(i);ec(f,i)||p(i);let[g,y]=r.useState(null),[m,v]=r.useState(null),w=r.useCallback(e=>{e!==k.current&&(k.current=e,y(e))},[]),b=r.useCallback(e=>{e!==R.current&&(R.current=e,v(e))},[]),x=o||g,S=a||m,k=r.useRef(null),R=r.useRef(null),A=r.useRef(h),C=null!=l,T=ef(l),E=ef(s),O=ef(c),q=r.useCallback(()=>{if(!k.current||!R.current)return;let e={placement:t,strategy:n,middleware:f};E.current&&(e.platform=E.current),ea(k.current,R.current,e).then(e=>{let t={...e,isPositioned:!1!==O.current};L.current&&!ec(A.current,t)&&(A.current=t,eu.flushSync(()=>{d(t)}))})},[f,t,n,E,O]);el(()=>{!1===c&&A.current.isPositioned&&(A.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);let L=r.useRef(!1);el(()=>(L.current=!0,()=>{L.current=!1}),[]),el(()=>{if(x&&(k.current=x),S&&(R.current=S),x&&S){if(T.current)return T.current(x,S,q);q()}},[x,S,q,T,C]);let M=r.useMemo(()=>({reference:k,floating:R,setReference:w,setFloating:b}),[w,b]),P=r.useMemo(()=>({reference:x,floating:S}),[x,S]),I=r.useMemo(()=>{let e={position:n,left:0,top:0};if(!P.floating)return e;let t=ed(P.floating,h.x),r=ed(P.floating,h.y);return u?{...e,transform:"translate("+t+"px, "+r+"px)",...eh(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,u,P.floating,h.x,h.y]);return r.useMemo(()=>({...h,update:q,refs:M,elements:P,floatingStyles:I}),[h,q,M,P,I])}({strategy:"fixed",placement:g+("center"!==m?"-"+m:""),whileElementsMounted:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n,r){let i;void 0===r&&(r={});let{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c="function"==typeof ResizeObserver,layoutShift:h="function"==typeof IntersectionObserver,animationFrame:d=!1}=r,f=H(e),p=a||l?[...f?W(f):[],...W(t)]:[];p.forEach(e=>{a&&e.addEventListener("scroll",n,{passive:!0}),l&&e.addEventListener("resize",n)});let g=f&&h?function(e,t){let n,r=null,i=L(e);function a(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return!function l(c,h){void 0===c&&(c=!1),void 0===h&&(h=1),a();let{left:d,top:f,width:p,height:g}=e.getBoundingClientRect();if(c||t(),!p||!g)return;let y=u(f),m=u(i.clientWidth-(d+p)),v={rootMargin:-y+"px "+-m+"px "+-u(i.clientHeight-(f+g))+"px "+-u(d)+"px",threshold:o(0,s(1,h))||1},w=!0;function b(e){let t=e[0].intersectionRatio;if(t!==h){if(!w)return l();t?l(!1,t):n=setTimeout(()=>{l(!1,1e-7)},1e3)}w=!1}try{r=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch(e){r=new IntersectionObserver(b,v)}r.observe(e)}(!0),a}(f,n):null,y=-1,m=null;c&&(m=new ResizeObserver(e=>{let[r]=e;r&&r.target===f&&m&&(m.unobserve(t),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var e;null==(e=m)||e.observe(t)})),n()}),f&&!d&&m.observe(f),m.observe(t));let v=d?X(e):null;return d&&function t(){let r=X(e);v&&(r.x!==v.x||r.y!==v.y||r.width!==v.width||r.height!==v.height)&&n(),v=r,i=requestAnimationFrame(t)}(),n(),()=>{var e;p.forEach(e=>{a&&e.removeEventListener("scroll",n),l&&e.removeEventListener("resize",n)}),null==g||g(),null==(e=m)||e.disconnect(),m=null,d&&cancelAnimationFrame(i)}}(...t,{animationFrame:"always"===A})},elements:{reference:E.anchor},middleware:[eg({mainAxis:y+N,alignmentAxis:v}),b&&ey({mainAxis:!0,crossAxis:!1,limiter:"partial"===k?em():void 0,..._}),b&&ev({..._}),ew({..._,apply:e=>{let{elements:t,rects:n,availableWidth:r,availableHeight:i}=e,{width:s,height:o}=n.reference,a=t.floating.style;a.setProperty("--radix-popper-available-width","".concat(r,"px")),a.setProperty("--radix-popper-available-height","".concat(i,"px")),a.setProperty("--radix-popper-anchor-width","".concat(s,"px")),a.setProperty("--radix-popper-anchor-height","".concat(o,"px"))}}),P&&ex({element:P,padding:w}),eU({arrowWidth:$,arrowHeight:N}),R&&eb({strategy:"referenceHidden",..._})]}),[G,Z]=ez(U),Y=(0,eT.c)(C);(0,eE.N)(()=>{z&&(null==Y||Y())},[z,Y]);let K=null===(n=J.arrow)||void 0===n?void 0:n.x,ee=null===(i=J.arrow)||void 0===i?void 0:i.y,et=(null===(a=J.arrow)||void 0===a?void 0:a.centerOffset)!==0,[en,er]=r.useState();return(0,eE.N)(()=>{O&&er(window.getComputedStyle(O).zIndex)},[O]),(0,ek.jsx)("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...B,transform:z?B.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:en,"--radix-popper-transform-origin":[null===(l=J.transformOrigin)||void 0===l?void 0:l.x,null===(c=J.transformOrigin)||void 0===c?void 0:c.y].join(" "),...(null===(h=J.hide)||void 0===h?void 0:h.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,ek.jsx)(eV,{scope:p,placedSide:G,onArrowChange:I,arrowX:K,arrowY:ee,shouldHideArrow:et,children:(0,ek.jsx)(eS.sG.div,{"data-side":G,"data-align":Z,...T,ref:M,style:{...T.style,animation:z?void 0:"none"}})})})});eD.displayName=eN;var e_="PopperArrow",eF={top:"bottom",right:"left",bottom:"top",left:"right"},eB=r.forwardRef(function(e,t){let{__scopePopper:n,...r}=e,i=eQ(e_,n),s=eF[i.placedSide];return(0,ek.jsx)("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:(0,ek.jsx)(eR,{...r,ref:t,style:{...r.style,display:"block"}})})});function eW(e){return null!==e}eB.displayName=e_;var eU=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i,s,o;let{placement:a,rects:u,middlewareData:l}=t,c=(null===(n=l.arrow)||void 0===n?void 0:n.centerOffset)!==0,h=c?0:e.arrowWidth,d=c?0:e.arrowHeight,[f,p]=ez(a),g={start:"0%",center:"50%",end:"100%"}[p],y=(null!==(s=null===(r=l.arrow)||void 0===r?void 0:r.x)&&void 0!==s?s:0)+h/2,m=(null!==(o=null===(i=l.arrow)||void 0===i?void 0:i.y)&&void 0!==o?o:0)+d/2,v="",w="";return"bottom"===f?(v=c?g:"".concat(y,"px"),w="".concat(-d,"px")):"top"===f?(v=c?g:"".concat(y,"px"),w="".concat(u.floating.height+d,"px")):"right"===f?(v="".concat(-d,"px"),w=c?g:"".concat(m,"px")):"left"===f&&(v="".concat(u.floating.width+d,"px"),w=c?g:"".concat(m,"px")),{data:{x:v,y:w}}}});function ez(e){let[t,n="center"]=e.split("-");return[t,n]}var eH=eI,eJ=e$,eG=eD,eZ=eB},3360:(e,t,n)=>{n.d(t,{hO:()=>u,sG:()=>a});var r=n(2115),i=n(7650),s=n(2317),o=n(5155),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let n=r.forwardRef((e,n)=>{let{asChild:r,...i}=e,a=r?s.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,o.jsx)(a,{...i,ref:n})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function u(e,t){e&&i.flushSync(()=>e.dispatchEvent(t))}},2317:(e,t,n)=>{n.d(t,{DX:()=>o,xV:()=>u});var r=n(2115),i=n(8068),s=n(5155),o=r.forwardRef((e,t)=>{let{children:n,...i}=e,o=r.Children.toArray(n),u=o.find(l);if(u){let e=u.props.children,n=o.map(t=>t!==u?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,s.jsx)(a,{...i,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,n):null})}return(0,s.jsx)(a,{...i,ref:t,children:n})});o.displayName="Slot";var a=r.forwardRef((e,t)=>{let{children:n,...s}=e;if(r.isValidElement(n)){let e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(n=(t=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?e.props.ref:e.props.ref||e.ref}(n);return r.cloneElement(n,{...function(e,t){let n={...t};for(let r in t){let i=e[r],s=t[r];/^on[A-Z]/.test(r)?i&&s?n[r]=(...e)=>{s(...e),i(...e)}:i&&(n[r]=i):"style"===r?n[r]={...i,...s}:"className"===r&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props),ref:t?(0,i.t)(t,e):e})}return r.Children.count(n)>1?r.Children.only(null):null});a.displayName="SlotClone";var u=({children:e})=>(0,s.jsx)(s.Fragment,{children:e});function l(e){return r.isValidElement(e)&&e.type===u}},9376:(e,t,n)=>{n.d(t,{UC:()=>Y,Kq:()=>G,bL:()=>Z,TooltipProvider:()=>P,l9:()=>X});var r,i=n(2115),s=n(3610),o=n(8068),a=n(8166),u=n(3360),l=n(1524),c=n(5630),h=n(5155),d="dismissableLayer.update",f=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),p=i.forwardRef((e,t)=>{var n,a;let{disableOutsidePointerEvents:p=!1,onEscapeKeyDown:m,onPointerDownOutside:v,onFocusOutside:w,onInteractOutside:b,onDismiss:x,...S}=e,k=i.useContext(f),[R,A]=i.useState(null),C=null!==(a=null==R?void 0:R.ownerDocument)&&void 0!==a?a:null===(n=globalThis)||void 0===n?void 0:n.document,[,T]=i.useState({}),E=(0,o.s)(t,e=>A(e)),O=Array.from(k.layers),[q]=[...k.layersWithOutsidePointerEventsDisabled].slice(-1),L=O.indexOf(q),M=R?O.indexOf(R):-1,P=k.layersWithOutsidePointerEventsDisabled.size>0,I=M>=L,j=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=globalThis)||void 0===t?void 0:t.document,r=(0,l.c)(e),s=i.useRef(!1),o=i.useRef(()=>{});return i.useEffect(()=>{let e=e=>{if(e.target&&!s.current){let t=function(){y("dismissableLayer.pointerDownOutside",r,i,{discrete:!0})},i={originalEvent:e};"touch"===e.pointerType?(n.removeEventListener("click",o.current),o.current=t,n.addEventListener("click",o.current,{once:!0})):t()}else n.removeEventListener("click",o.current);s.current=!1},t=window.setTimeout(()=>{n.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(t),n.removeEventListener("pointerdown",e),n.removeEventListener("click",o.current)}},[n,r]),{onPointerDownCapture:()=>s.current=!0}}(e=>{let t=e.target,n=[...k.branches].some(e=>e.contains(t));!I||n||(null==v||v(e),null==b||b(e),e.defaultPrevented||null==x||x())},C),$=function(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=globalThis)||void 0===t?void 0:t.document,r=(0,l.c)(e),s=i.useRef(!1);return i.useEffect(()=>{let e=e=>{e.target&&!s.current&&y("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return n.addEventListener("focusin",e),()=>n.removeEventListener("focusin",e)},[n,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}(e=>{let t=e.target;[...k.branches].some(e=>e.contains(t))||(null==w||w(e),null==b||b(e),e.defaultPrevented||null==x||x())},C);return(0,c.U)(e=>{M!==k.layers.size-1||(null==m||m(e),!e.defaultPrevented&&x&&(e.preventDefault(),x()))},C),i.useEffect(()=>{if(R)return p&&(0===k.layersWithOutsidePointerEventsDisabled.size&&(r=C.body.style.pointerEvents,C.body.style.pointerEvents="none"),k.layersWithOutsidePointerEventsDisabled.add(R)),k.layers.add(R),g(),()=>{p&&1===k.layersWithOutsidePointerEventsDisabled.size&&(C.body.style.pointerEvents=r)}},[R,C,p,k]),i.useEffect(()=>()=>{R&&(k.layers.delete(R),k.layersWithOutsidePointerEventsDisabled.delete(R),g())},[R,k]),i.useEffect(()=>{let e=()=>T({});return document.addEventListener(d,e),()=>document.removeEventListener(d,e)},[]),(0,h.jsx)(u.sG.div,{...S,ref:E,style:{pointerEvents:P?I?"auto":"none":void 0,...e.style},onFocusCapture:(0,s.m)(e.onFocusCapture,$.onFocusCapture),onBlurCapture:(0,s.m)(e.onBlurCapture,$.onBlurCapture),onPointerDownCapture:(0,s.m)(e.onPointerDownCapture,j.onPointerDownCapture)})});function g(){let e=new CustomEvent(d);document.dispatchEvent(e)}function y(e,t,n,r){let{discrete:i}=r,s=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),i?(0,u.hO)(s,o):s.dispatchEvent(o)}p.displayName="DismissableLayer",i.forwardRef((e,t)=>{let n=i.useContext(f),r=i.useRef(null),s=(0,o.s)(t,r);return i.useEffect(()=>{let e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,h.jsx)(u.sG.div,{...e,ref:s})}).displayName="DismissableLayerBranch";var m=n(7668),v=n(905),w=n(7650),b=n(6611);i.forwardRef((e,t)=>{var n,r;let{container:s,...o}=e,[a,l]=i.useState(!1);(0,b.N)(()=>l(!0),[]);let c=s||a&&(null===(r=globalThis)||void 0===r?void 0:null===(n=r.document)||void 0===n?void 0:n.body);return c?w.createPortal((0,h.jsx)(u.sG.div,{...o,ref:t}),c):null}).displayName="Portal";var x=e=>{let{present:t,children:n}=e,r=function(e){var t,n;let[r,s]=i.useState(),o=i.useRef({}),a=i.useRef(e),u=i.useRef("none"),[l,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((e,t)=>{let r=n[e][t];return null!=r?r:e},t));return i.useEffect(()=>{let e=S(o.current);u.current="mounted"===l?e:"none"},[l]),(0,b.N)(()=>{let t=o.current,n=a.current;if(n!==e){let r=u.current,i=S(t);e?c("MOUNT"):"none"===i||(null==t?void 0:t.display)==="none"?c("UNMOUNT"):n&&r!==i?c("ANIMATION_OUT"):c("UNMOUNT"),a.current=e}},[e,c]),(0,b.N)(()=>{if(r){let e=e=>{let t=S(o.current).includes(e.animationName);e.target===r&&t&&w.flushSync(()=>c("ANIMATION_END"))},t=e=>{e.target===r&&(u.current=S(o.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:i.useCallback(e=>{e&&(o.current=getComputedStyle(e)),s(e)},[])}}(t),s="function"==typeof n?n({present:r.isPresent}):i.Children.only(n),a=(0,o.s)(r.ref,function(e){var t,n;let r=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(i=(r=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s));return"function"==typeof n||r.isPresent?i.cloneElement(s,{ref:a}):null};function S(e){return(null==e?void 0:e.animationName)||"none"}x.displayName="Presence";var k=n(2317),R=n(1488),A=i.forwardRef((e,t)=>(0,h.jsx)(u.sG.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));A.displayName="VisuallyHidden";var[C,T]=(0,a.A)("Tooltip",[v.Bk]),E=(0,v.Bk)(),O="TooltipProvider",q="tooltip.open",[L,M]=C(O),P=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=e,[a,u]=i.useState(!0),l=i.useRef(!1),c=i.useRef(0);return i.useEffect(()=>{let e=c.current;return()=>window.clearTimeout(e)},[]),(0,h.jsx)(L,{scope:t,isOpenDelayed:a,delayDuration:n,onOpen:i.useCallback(()=>{window.clearTimeout(c.current),u(!1)},[]),onClose:i.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>u(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:i.useCallback(e=>{l.current=e},[]),disableHoverableContent:s,children:o})};P.displayName=O;var I="Tooltip",[j,$]=C(I),N=e=>{let{__scopeTooltip:t,children:n,open:r,defaultOpen:s=!1,onOpenChange:o,disableHoverableContent:a,delayDuration:u}=e,l=M(I,e.__scopeTooltip),c=E(t),[d,f]=i.useState(null),p=(0,m.B)(),g=i.useRef(0),y=null!=a?a:l.disableHoverableContent,w=null!=u?u:l.delayDuration,b=i.useRef(!1),[x=!1,S]=(0,R.i)({prop:r,defaultProp:s,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(q))):l.onClose(),null==o||o(e)}}),k=i.useMemo(()=>x?b.current?"delayed-open":"instant-open":"closed",[x]),A=i.useCallback(()=>{window.clearTimeout(g.current),b.current=!1,S(!0)},[S]),C=i.useCallback(()=>{window.clearTimeout(g.current),S(!1)},[S]),T=i.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,S(!0)},w)},[w,S]);return i.useEffect(()=>()=>window.clearTimeout(g.current),[]),(0,h.jsx)(v.bL,{...c,children:(0,h.jsx)(j,{scope:t,contentId:p,open:x,stateAttribute:k,trigger:d,onTriggerChange:f,onTriggerEnter:i.useCallback(()=>{l.isOpenDelayed?T():A()},[l.isOpenDelayed,T,A]),onTriggerLeave:i.useCallback(()=>{y?C():window.clearTimeout(g.current)},[C,y]),onOpen:A,onClose:C,disableHoverableContent:y,children:n})})};N.displayName=I;var V="TooltipTrigger",Q=i.forwardRef((e,t)=>{let{__scopeTooltip:n,...r}=e,a=$(V,n),l=M(V,n),c=E(n),d=i.useRef(null),f=(0,o.s)(t,d,a.onTriggerChange),p=i.useRef(!1),g=i.useRef(!1),y=i.useCallback(()=>p.current=!1,[]);return i.useEffect(()=>()=>document.removeEventListener("pointerup",y),[y]),(0,h.jsx)(v.Mz,{asChild:!0,...c,children:(0,h.jsx)(u.sG.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:f,onPointerMove:(0,s.m)(e.onPointerMove,e=>{"touch"===e.pointerType||g.current||l.isPointerInTransitRef.current||(a.onTriggerEnter(),g.current=!0)}),onPointerLeave:(0,s.m)(e.onPointerLeave,()=>{a.onTriggerLeave(),g.current=!1}),onPointerDown:(0,s.m)(e.onPointerDown,()=>{p.current=!0,document.addEventListener("pointerup",y,{once:!0})}),onFocus:(0,s.m)(e.onFocus,()=>{p.current||a.onOpen()}),onBlur:(0,s.m)(e.onBlur,a.onClose),onClick:(0,s.m)(e.onClick,a.onClose)})})});Q.displayName=V;var[D,_]=C("TooltipPortal",{forceMount:void 0}),F="TooltipContent",B=i.forwardRef((e,t)=>{let n=_(F,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...s}=e,o=$(F,e.__scopeTooltip);return(0,h.jsx)(x,{present:r||o.open,children:o.disableHoverableContent?(0,h.jsx)(H,{side:i,...s,ref:t}):(0,h.jsx)(W,{side:i,...s,ref:t})})}),W=i.forwardRef((e,t)=>{let n=$(F,e.__scopeTooltip),r=M(F,e.__scopeTooltip),s=i.useRef(null),a=(0,o.s)(t,s),[u,l]=i.useState(null),{trigger:c,onClose:d}=n,f=s.current,{onPointerInTransitChange:p}=r,g=i.useCallback(()=>{l(null),p(!1)},[p]),y=i.useCallback((e,t)=>{let n=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(n,r,i,s)){case s:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw Error("unreachable")}}(r,n.getBoundingClientRect());l(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}([...function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,i),...function(e){let{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect())])),p(!0)},[p]);return i.useEffect(()=>()=>g(),[g]),i.useEffect(()=>{if(c&&f){let e=e=>y(e,f),t=e=>y(e,c);return c.addEventListener("pointerleave",e),f.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),f.removeEventListener("pointerleave",t)}}},[c,f,y,g]),i.useEffect(()=>{if(u){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==f?void 0:f.contains(t)),i=!function(e,t){let{x:n,y:r}=e,i=!1;for(let e=0,s=t.length-1;e<t.length;s=e++){let o=t[e].x,a=t[e].y,u=t[s].x,l=t[s].y;a>r!=l>r&&n<(u-o)*(r-a)/(l-a)+o&&(i=!i)}return i}(n,u);r?g():i&&(g(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,f,u,d,g]),(0,h.jsx)(H,{...e,ref:a})}),[U,z]=C(I,{isInside:!1}),H=i.forwardRef((e,t)=>{let{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...u}=e,l=$(F,n),c=E(n),{onClose:d}=l;return i.useEffect(()=>(document.addEventListener(q,d),()=>document.removeEventListener(q,d)),[d]),i.useEffect(()=>{if(l.trigger){let e=e=>{let t=e.target;(null==t?void 0:t.contains(l.trigger))&&d()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,d]),(0,h.jsx)(p,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:d,children:(0,h.jsxs)(v.UC,{"data-state":l.stateAttribute,...c,...u,ref:t,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,h.jsx)(k.xV,{children:r}),(0,h.jsx)(U,{scope:n,isInside:!0,children:(0,h.jsx)(A,{id:l.contentId,role:"tooltip",children:s||r})})]})})});B.displayName=F;var J="TooltipArrow";i.forwardRef((e,t)=>{let{__scopeTooltip:n,...r}=e,i=E(n);return z(J,n).isInside?null:(0,h.jsx)(v.i3,{...i,...r,ref:t})}).displayName=J;var G=P,Z=N,X=Q,Y=B},1524:(e,t,n)=>{n.d(t,{c:()=>i});var r=n(2115);function i(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}},1488:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(2115),i=n(1524);function s({prop:e,defaultProp:t,onChange:n=()=>{}}){let[s,o]=function({defaultProp:e,onChange:t}){let n=r.useState(e),[s]=n,o=r.useRef(s),a=(0,i.c)(t);return r.useEffect(()=>{o.current!==s&&(a(s),o.current=s)},[s,o,a]),n}({defaultProp:t,onChange:n}),a=void 0!==e,u=a?e:s,l=(0,i.c)(n);return[u,r.useCallback(t=>{if(a){let n="function"==typeof t?t(e):t;n!==e&&l(n)}else o(t)},[a,e,o,l])]}},5630:(e,t,n)=>{n.d(t,{U:()=>s});var r=n(2115),i=n(1524);function s(e,t=globalThis?.document){let n=(0,i.c)(e);r.useEffect(()=>{let e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}},6611:(e,t,n)=>{n.d(t,{N:()=>i});var r=n(2115),i=globalThis?.document?r.useLayoutEffect:()=>{}},7403:(e,t,n)=>{function r(e){if(void 0===e)return{};if(!s(e))throw Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function i(e){if(void 0===e)throw Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if("string"!=typeof e)throw Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);try{new URL(e)}catch{throw Error(`Invalid deployment address: "${e}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(e.endsWith(".convex.site"))throw Error(`Invalid deployment address: "${e}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function s(e){let t="object"==typeof e,n=Object.getPrototypeOf(e),r=null===n||n===Object.prototype||n?.constructor?.name==="Object";return t&&r}n.d(t,{R6:()=>i,Zy:()=>r,iY:()=>s})},8167:(e,t,n)=>{n.d(t,{r:()=>r});let r="1.17.3"},3317:(e,t,n)=>{n.d(t,{N:()=>a,Z:()=>o});var r=n(2115),i=n(9157);let s=(0,r.createContext)(void 0);function o(){let e=(0,r.useContext)(s);if(void 0===e)throw Error("Could not find `ConvexProviderWithAuth` (or `ConvexProviderWithClerk` or `ConvexProviderWithAuth0`) as an ancestor component. This component may be missing, or you might have two instances of the `convex/react` module loaded in your project.");return e}function a({children:e,client:t,useAuth:n}){let{isLoading:o,isAuthenticated:a,fetchAccessToken:c}=n(),[h,d]=(0,r.useState)(null);return o&&null!==h&&d(null),o||a||!1===h||d(!1),r.createElement(s.Provider,{value:{isLoading:null===h,isAuthenticated:a&&(h??!1)}},r.createElement(u,{isAuthenticated:a,fetchAccessToken:c,isLoading:o,client:t,setIsConvexAuthenticated:d}),r.createElement(i.hD,{client:t},e),r.createElement(l,{isAuthenticated:a,fetchAccessToken:c,isLoading:o,client:t,setIsConvexAuthenticated:d}))}function u({isAuthenticated:e,fetchAccessToken:t,isLoading:n,client:i,setIsConvexAuthenticated:s}){return(0,r.useEffect)(()=>{let n=!0;if(e)return i.setAuth(t,e=>{n&&s(()=>e)}),()=>{n=!1,s(e=>!e&&null)}},[e,t,n,i,s]),null}function l({isAuthenticated:e,fetchAccessToken:t,isLoading:n,client:i,setIsConvexAuthenticated:s}){return(0,r.useEffect)(()=>{if(e)return()=>{i.clearAuth(),s(()=>null)}},[e,t,n,i,s]),null}},9157:(e,t,n)=>{n.d(t,{hD:()=>ev,eH:()=>eg,BN:()=>em,n_:()=>eb,IT:()=>ew});var r=n(8167),i=n(2052),s=Object.defineProperty,o=(e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,a=(e,t,n)=>o(e,"symbol"!=typeof t?t+"":t,n);function u(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class l{constructor(e){a(this,"_onLogLineFuncs"),a(this,"_verbose"),this._onLogLineFuncs={},this._verbose=e.verbose}addLogLineListener(e){let t=Math.random().toString(36).substring(2,15);for(let e=0;e<10&&void 0!==this._onLogLineFuncs[t];e++)t=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[t]=e,()=>{delete this._onLogLineFuncs[t]}}logVerbose(...e){if(this._verbose)for(let t of Object.values(this._onLogLineFuncs))t("debug",`${new Date().toISOString()}`,...e)}log(...e){for(let t of Object.values(this._onLogLineFuncs))t("info",...e)}warn(...e){for(let t of Object.values(this._onLogLineFuncs))t("warn",...e)}error(...e){for(let t of Object.values(this._onLogLineFuncs))t("error",...e)}}function c(e){let t=new l(e);return t.addLogLineListener((e,...t)=>{switch(e){case"debug":console.debug(...t);break;case"info":default:console.log(...t);break;case"warn":console.warn(...t);break;case"error":console.error(...t)}}),t}function h(e,t,n,r,i){let s=u(n);if("object"==typeof i&&(i=`ConvexError ${JSON.stringify(i.errorData,null,2)}`),"info"===t){let t=i.match(/^\[.*?\] /);if(null===t){e.error(`[CONVEX ${s}(${r})] Could not parse console.log`);return}let n=i.slice(1,t[0].length-2),o=i.slice(t[0].length);e.log(`%c[CONVEX ${s}(${r})] [${n}]`,"color:rgb(0, 145, 255)",o)}else e.error(`[CONVEX ${s}(${r})] ${i}`)}function d(e,t,n){let r=u(e);return`[CONVEX ${r}(${t})] ${n.errorMessage}
  Called by client`}function f(e,t){return t.data=e.errorData,t}function p(e){let t,n;let r=e.split(":");return 1===r.length?(t=r[0],n="default"):(t=r.slice(0,r.length-1).join(":"),n=r[r.length-1]),t.endsWith(".js")&&(t=t.slice(0,-3)),`${t}:${n}`}function g(e,t){return JSON.stringify({udfPath:p(e),args:(0,i.rz)(t)})}var y=Object.defineProperty,m=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t,n)=>m(e,"symbol"!=typeof t?t+"":t,n);class w{constructor(){v(this,"nextQueryId"),v(this,"querySetVersion"),v(this,"querySet"),v(this,"queryIdToToken"),v(this,"identityVersion"),v(this,"auth"),v(this,"outstandingQueriesOlderThanRestart"),v(this,"outstandingAuthOlderThanRestart"),v(this,"paused"),v(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return 0===this.outstandingQueriesOlderThanRestart.size&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(e,t,n,r){let s=p(e),o=g(s,t),a=this.querySet.get(o);if(void 0!==a)return a.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{let e=this.nextQueryId++;this.querySet.set(o,{id:e,canonicalizedUdfPath:s,args:t,numSubscribers:1,journal:n,componentPath:r}),this.queryIdToToken.set(e,o);let a=this.querySetVersion,u=this.querySetVersion+1,l={type:"Add",queryId:e,udfPath:s,args:[(0,i.rz)(t)],journal:n,componentPath:r};return this.paused?this.pendingQuerySetModifications.set(e,l):this.querySetVersion=u,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:a,newVersion:u,modifications:[l]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(e){for(let t of e.modifications)switch(t.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(t.queryId);let e=t.journal;if(void 0!==e){let n=this.queryIdToToken.get(t.queryId);void 0!==n&&(this.querySet.get(n).journal=e)}break}case"QueryRemoved":this.outstandingQueriesOlderThanRestart.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}}queryId(e,t){let n=g(p(e),t),r=this.querySet.get(n);return void 0!==r?r.id:null}isCurrentOrNewerAuthVersion(e){return e>=this.identityVersion}setAuth(e){this.auth={tokenType:"User",value:e};let t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",baseVersion:t,...this.auth}}setAdminAuth(e,t){let n={tokenType:"Admin",value:e,impersonating:t};this.auth=n;let r=this.identityVersion;return this.paused||(this.identityVersion=r+1),{type:"Authenticate",baseVersion:r,...n}}clearAuth(){this.auth=void 0,this.markAuthCompletion();let e=this.identityVersion;return this.paused||(this.identityVersion=e+1),{type:"Authenticate",tokenType:"None",baseVersion:e}}hasAuth(){return!!this.auth}isNewAuth(e){return this.auth?.value!==e}queryPath(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).canonicalizedUdfPath:null}queryArgs(e){let t=this.queryIdToToken.get(e);return t?this.querySet.get(t).args:null}queryToken(e){return this.queryIdToToken.get(e)??null}queryJournal(e){return this.querySet.get(e)?.journal}restart(e){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();let t=[];for(let n of this.querySet.values()){let r={type:"Add",queryId:n.id,udfPath:n.canonicalizedUdfPath,args:[(0,i.rz)(n.args)],journal:n.journal,componentPath:n.componentPath};t.push(r),e.has(n.id)||this.outstandingQueriesOlderThanRestart.add(n.id)}this.querySetVersion=1;let n={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:t};if(!this.auth)return this.identityVersion=0,[n,void 0];this.outstandingAuthOlderThanRestart=!0;let r={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[n,r]}pause(){this.paused=!0}resume(){let e=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,t=void 0!==this.auth?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[e,t]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(e){let t=this.querySet.get(e);if(t.numSubscribers>1)return t.numSubscribers-=1,null;{this.querySet.delete(e),this.queryIdToToken.delete(t.id),this.outstandingQueriesOlderThanRestart.delete(t.id);let n=this.querySetVersion,r=this.querySetVersion+1,i={type:"Remove",queryId:t.id};return this.paused?this.pendingQuerySetModifications.has(t.id)?this.pendingQuerySetModifications.delete(t.id):this.pendingQuerySetModifications.set(t.id,i):this.querySetVersion=r,{type:"ModifyQuerySet",baseVersion:n,newVersion:r,modifications:[i]}}}}var b=Object.defineProperty,x=(e,t,n)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,S=(e,t,n)=>x(e,"symbol"!=typeof t?t+"":t,n);class k{constructor(e){this.logger=e,S(this,"inflightRequests"),S(this,"requestsOlderThanRestart"),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(e,t){return new Promise(n=>{this.inflightRequests.set(e.requestId,{message:e,status:{status:t?"Requested":"NotSent",requestedAt:new Date,onResult:n}})})}onResponse(e){let t;let n=this.inflightRequests.get(e.requestId);if(void 0===n||"Completed"===n.status.status)return null;let r="Mutation"===n.message.type?"mutation":"action",s=n.message.udfPath;for(let t of e.logLines)h(this.logger,"info",r,s,t);let o=n.status;if(e.success)t=()=>o.onResult({success:!0,logLines:e.logLines,value:(0,i.du)(e.result)});else{let n=e.result,{errorData:a}=e;h(this.logger,"error",r,s,n),t=()=>o.onResult({success:!1,errorMessage:n,errorData:void 0!==a?(0,i.du)(a):void 0,logLines:e.logLines})}return"ActionResponse"!==e.type&&e.success?(n.status={status:"Completed",ts:e.ts,onResolve:t},null):(t(),this.inflightRequests.delete(e.requestId),this.requestsOlderThanRestart.delete(e.requestId),e.requestId)}removeCompleted(e){let t=new Set;for(let[n,r]of this.inflightRequests.entries()){let i=r.status;"Completed"===i.status&&i.ts.lessThanOrEqual(e)&&(i.onResolve(),t.add(n),this.inflightRequests.delete(n),this.requestsOlderThanRestart.delete(n))}return t}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());let e=[];for(let[t,n]of this.inflightRequests){if("NotSent"===n.status.status){n.status.status="Requested",e.push(n.message);continue}if("Mutation"===n.message.type)e.push(n.message);else{if(this.inflightRequests.delete(t),this.requestsOlderThanRestart.delete(t),"Completed"===n.status.status)throw Error("Action should never be in 'Completed' state");n.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return e}resume(){let e=[];for(let[,t]of this.inflightRequests)if("NotSent"===t.status.status){t.status.status="Requested",e.push(t.message);continue}return e}hasIncompleteRequests(){for(let e of this.inflightRequests.values())if("Requested"===e.status.status)return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return 0===this.requestsOlderThanRestart.size}timeOfOldestInflightRequest(){if(0===this.inflightRequests.size)return null;let e=Date.now();for(let t of this.inflightRequests.values())"Completed"!==t.status.status&&t.status.requestedAt.getTime()<e&&(e=t.status.requestedAt.getTime());return new Date(e)}}var R=n(7345),A=n(7403),C=n(3499),T=Object.defineProperty,E=(e,t,n)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t,n)=>E(e,"symbol"!=typeof t?t+"":t,n);class q{constructor(e){O(this,"queryResults"),O(this,"modifiedQueries"),this.queryResults=e,this.modifiedQueries=[]}getQuery(e,...t){let n=(0,A.Zy)(t[0]),r=(0,R.qQ)(e),i=this.queryResults.get(g(r,n));if(void 0!==i)return q.queryValue(i.result)}getAllQueries(e){let t=[],n=(0,R.qQ)(e);for(let e of this.queryResults.values())e.udfPath===p(n)&&t.push({args:e.args,value:q.queryValue(e.result)});return t}setQuery(e,t,n){let r=(0,A.Zy)(t),i=(0,R.qQ)(e),s=g(i,r);this.queryResults.set(s,{udfPath:i,args:r,result:void 0===n?void 0:{success:!0,value:n,logLines:[]}}),this.modifiedQueries.push(s)}static queryValue(e){return void 0===e?void 0:e.success?e.value:void 0}}class L{constructor(){O(this,"queryResults"),O(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(e,t){this.optimisticUpdates=this.optimisticUpdates.filter(e=>!t.has(e.mutationId));let n=this.queryResults;this.queryResults=new Map(e);let r=new q(this.queryResults);for(let e of this.optimisticUpdates)e.update(r);let i=[];for(let[e,t]of this.queryResults){let r=n.get(e);(void 0===r||r.result!==t.result)&&i.push(e)}return i}applyOptimisticUpdate(e,t){this.optimisticUpdates.push({update:e,mutationId:t});let n=new q(this.queryResults);return e(n),n.modifiedQueries}queryResult(e){let t=this.queryResults.get(e);if(void 0===t)return;let n=t.result;if(void 0!==n){if(n.success)return n.value;if(void 0!==n.errorData)throw f(n,new C.i(d("query",t.udfPath,n)));throw Error(d("query",t.udfPath,n))}}hasQueryResult(e){return void 0!==this.queryResults.get(e)}queryLogs(e){let t=this.queryResults.get(e);return t?.result?.logLines}}var M=Object.defineProperty,P=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t,n)=>P(e,"symbol"!=typeof t?t+"":t,n);class j{constructor(e,t){I(this,"low"),I(this,"high"),I(this,"__isUnsignedLong__"),this.low=0|e,this.high=0|t,this.__isUnsignedLong__=!0}static isLong(e){return!0===(e&&e.__isUnsignedLong__)}static fromBytesLE(e){return new j(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24)}toBytesLE(){let e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]}static fromNumber(e){return isNaN(e)||e<0?$:e>=V?Q:new j(e%N|0,e/N|0)}toString(){return(BigInt(this.high)*BigInt(N)+BigInt(this.low)).toString()}equals(e){return j.isLong(e)||(e=j.fromValue(e)),(this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low}notEquals(e){return!this.equals(e)}comp(e){return(j.isLong(e)||(e=j.fromValue(e)),this.equals(e))?0:e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(e){return 0>=this.comp(e)}static fromValue(e){return"number"==typeof e?j.fromNumber(e):new j(e.low,e.high)}}let $=new j(0,0),N=0x100000000,V=0xffffffffffffffff,Q=new j(-1,-1);var D=Object.defineProperty,_=(e,t,n)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,F=(e,t,n)=>_(e,"symbol"!=typeof t?t+"":t,n);class B{constructor(e,t){F(this,"version"),F(this,"remoteQuerySet"),F(this,"queryPath"),F(this,"logger"),this.version={querySet:0,ts:j.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=e,this.logger=t}transition(e){let t=e.startVersion;if(this.version.querySet!==t.querySet||this.version.ts.notEquals(t.ts)||this.version.identity!==t.identity)throw Error(`Invalid start version: ${t.ts.toString()}:${t.querySet}`);for(let t of e.modifications)switch(t.type){case"QueryUpdated":{let e=this.queryPath(t.queryId);if(e)for(let n of t.logLines)h(this.logger,"info","query",e,n);let n=(0,i.du)(t.value??null);this.remoteQuerySet.set(t.queryId,{success:!0,value:n,logLines:t.logLines});break}case"QueryFailed":{let e=this.queryPath(t.queryId);if(e)for(let n of t.logLines)h(this.logger,"info","query",e,n);let{errorData:n}=t;this.remoteQuerySet.set(t.queryId,{success:!1,errorMessage:t.errorMessage,errorData:void 0!==n?(0,i.du)(n):void 0,logLines:t.logLines});break}case"QueryRemoved":this.remoteQuerySet.delete(t.queryId);break;default:throw Error(`Invalid modification ${t.type}`)}this.version=e.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function W(e){let t=i.o4.toByteArray(e);return j.fromBytesLE(Array.from(t))}var U=Object.defineProperty,z=(e,t,n)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,H=(e,t,n)=>z(e,"symbol"!=typeof t?t+"":t,n);class J{constructor(e,t,n,r){H(this,"socket"),H(this,"connectionCount"),H(this,"lastCloseReason"),H(this,"initialBackoff"),H(this,"maxBackoff"),H(this,"retries"),H(this,"serverInactivityThreshold"),H(this,"reconnectDueToServerInactivityTimeout"),H(this,"uri"),H(this,"onOpen"),H(this,"onResume"),H(this,"onMessage"),H(this,"webSocketConstructor"),H(this,"logger"),this.webSocketConstructor=n,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.initialBackoff=100,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=3e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=e,this.onOpen=t.onOpen,this.onResume=t.onResume,this.onMessage=t.onMessage,this.logger=r,this.connect()}connect(){if("terminated"===this.socket.state)return;if("disconnected"!==this.socket.state&&"stopped"!==this.socket.state)throw Error("Didn't start connection from disconnected state: "+this.socket.state);let e=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.socket={state:"connecting",ws:e,paused:"no"},this.resetServerInactivityTimeout(),e.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),"connecting"!==this.socket.state)throw Error("onopen called with socket not in connecting state");this.socket={state:"ready",ws:e,paused:"yes"===this.socket.paused?"uninitialized":"no"},this.resetServerInactivityTimeout(),"no"===this.socket.paused&&this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason}),"InitialConnect"!==this.lastCloseReason&&this.logger.log("WebSocket reconnected"),this.connectionCount+=1,this.lastCloseReason=null},e.onerror=e=>{let t=e.message;this.logger.log(`WebSocket error: ${t}`)},e.onmessage=e=>{this.resetServerInactivityTimeout();let t=function(e){switch(e.type){case"FatalError":case"AuthError":case"ActionResponse":case"Ping":return{...e};case"MutationResponse":if(e.success)return{...e,ts:W(e.ts)};return{...e};case"Transition":return{...e,startVersion:{...e.startVersion,ts:W(e.startVersion.ts)},endVersion:{...e.endVersion,ts:W(e.endVersion.ts)}}}}(JSON.parse(e.data));this._logVerbose(`received ws message with type ${t.type}`),this.onMessage(t).hasSyncedPastLastReconnect&&(this.retries=0)},e.onclose=e=>{if(this._logVerbose("begin ws.onclose"),null===this.lastCloseReason&&(this.lastCloseReason=e.reason??"OnCloseInvoked"),1e3!==e.code&&1001!==e.code&&1005!==e.code&&4040!==e.code){let t=`WebSocket closed with code ${e.code}`;e.reason&&(t+=`: ${e.reason}`),this.logger.log(t)}this.scheduleReconnect()}}socketState(){return this.socket.state}sendMessage(e){if(this._logVerbose(`sending message with type ${e.type}`),"ready"===this.socket.state&&"no"===this.socket.paused){let t=JSON.stringify(function(e){switch(e.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...e};case"Connect":if(void 0!==e.maxObservedTimestamp)return{...e,maxObservedTimestamp:function(e){let t=new Uint8Array(e.toBytesLE());return i.o4.fromByteArray(t)}(e.maxObservedTimestamp)};return{...e,maxObservedTimestamp:void 0}}}(e));try{this.socket.ws.send(t)}catch(e){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${e}`),this.closeAndReconnect("FailedToSendMessage")}return!0}return!1}resetServerInactivityTimeout(){"terminated"!==this.socket.state&&(null!==this.reconnectDueToServerInactivityTimeout&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(){this.socket={state:"disconnected"};let e=this.nextBackoff();this.logger.log(`Attempting reconnect in ${e}ms`),setTimeout(()=>this.connect(),e)}closeAndReconnect(e){switch(this._logVerbose(`begin closeAndReconnect with reason ${e}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":this.lastCloseReason=e,this.close(),this.scheduleReconnect();return;default:this.socket}}close(){switch(this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{let e=this.socket.ws;return new Promise(t=>{e.onclose=()=>{this._logVerbose("Closed after connecting"),t()},e.onopen=()=>{this._logVerbose("Opened after connecting"),e.close()}})}case"ready":{this._logVerbose("ws.close called");let e=this.socket.ws,t=new Promise(t=>{e.onclose=()=>{t()}});return e.close(),t}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{let e=this.close();return this.socket={state:"terminated"},e}default:throw this.socket,Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{let e=this.close();return this.socket={state:"stopped"},e}default:return this.socket,Promise.resolve()}}restart(){switch(this.socket.state){case"stopped":break;case"terminated":return;case"connecting":case"ready":case"disconnected":throw Error("`restart()` is only valid after `stop()`");default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":this.socket={...this.socket,paused:"yes"};return;default:this.socket;return}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":"uninitialized"===this.socket.paused?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason})):"yes"===this.socket.paused&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}_logVerbose(e){this.logger.logVerbose(e)}nextBackoff(){let e=this.initialBackoff*Math.pow(2,this.retries);this.retries+=1;let t=Math.min(e,this.maxBackoff),n=t*(Math.random()-.5);return t+n}}function G(e){this.message=e}G.prototype=Error(),G.prototype.name="InvalidCharacterError";var Z="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new G("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,i=0,s=0,o="";r=t.charAt(s++);~r&&(n=i%4?64*n+r:r,i++%4)&&(o+=String.fromCharCode(255&n>>(-2*i&6))))r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(r);return o};function X(e){this.message=e}X.prototype=Error(),X.prototype.name="InvalidTokenError";let Y=function(e,t){if("string"!=typeof e)throw new X("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(function(e){var t,n=e.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw"Illegal base64url string!"}try{return t=n,decodeURIComponent(Z(t).replace(/(.)/g,function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return Z(n)}}(e.split(".")[n]))}catch(e){throw new X("Invalid token specified: "+e.message)}};var K=Object.defineProperty,ee=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,et=(e,t,n)=>ee(e,"symbol"!=typeof t?t+"":t,n);class en{constructor(e,t,n){et(this,"authState",{state:"noAuth"}),et(this,"configVersion",0),et(this,"syncState"),et(this,"authenticate"),et(this,"stopSocket"),et(this,"restartSocket"),et(this,"pauseSocket"),et(this,"resumeSocket"),et(this,"clearAuth"),et(this,"logger"),et(this,"refreshTokenLeewaySeconds"),this.syncState=e,this.authenticate=t.authenticate,this.stopSocket=t.stopSocket,this.restartSocket=t.restartSocket,this.pauseSocket=t.pauseSocket,this.resumeSocket=t.resumeSocket,this.clearAuth=t.clearAuth,this.logger=n.logger,this.refreshTokenLeewaySeconds=n.refreshTokenLeewaySeconds}async setConfig(e,t){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();let n=await this.fetchTokenAndGuardAgainstRace(e,{forceRefreshToken:!1});n.isFromOutdatedConfig||(n.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:e,onAuthChange:t},hasRetried:!1}),this.authenticate(n.value),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket()):(this.setAuthState({state:"initialRefetch",config:{fetchToken:e,onAuthChange:t}}),await this.refetchToken()))}onTransition(e){if(this.syncState.isCurrentOrNewerAuthVersion(e.endVersion.identity)&&!(e.endVersion.identity<=e.startVersion.identity)){if("waitingForServerConfirmationOfCachedToken"===this.authState.state){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}"waitingForServerConfirmationOfFreshToken"!==this.authState.state||(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(e){let{baseVersion:t}=e;if(null!=t){if(!this.syncState.isCurrentOrNewerAuthVersion(t+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(e);return}this.tryToReauthenticate(e)}async tryToReauthenticate(e){if("noAuth"===this.authState.state||"waitingForServerConfirmationOfFreshToken"===this.authState.state){this.logger.error(`Failed to authenticate: "${e.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),"noAuth"!==this.authState.state&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this._logVerbose("attempting to reauthenticate"),await this.stopSocket();let t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value&&this.syncState.isNewAuth(t.value)?(this.authenticate(t.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:t.value,hadAuth:"notRefetching"===this.authState.state||"waitingForScheduledRefetch"===this.authState.state})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.restartSocket())}async refetchToken(){if("noAuth"===this.authState.state)return;this._logVerbose("refetching auth token");let e=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});e.isFromOutdatedConfig||(e.value?this.syncState.isNewAuth(e.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:e.value,config:this.authState.config}),this.authenticate(e.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("resuming WS after auth token fetch (if currently paused)"),this.resumeSocket())}scheduleTokenRefetch(e){if("noAuth"===this.authState.state)return;let t=this.decodeToken(e);if(!t){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}let{iat:n,exp:r}=t;if(!n||!r){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}let i=r-n;if(i<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let s=Math.min(1728e6,(i-this.refreshTokenLeewaySeconds)*1e3);s<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${i}s`),s=0);let o=setTimeout(()=>{this.refetchToken()},s);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:o,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${s}ms`)}async fetchTokenAndGuardAgainstRace(e,t){let n=++this.configVersion,r=await e(t);return this.configVersion!==n?{isFromOutdatedConfig:!0}:{isFromOutdatedConfig:!1,value:r}}stop(){this.resetAuthState(),this.configVersion++}setAndReportAuthFailed(e){e(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(e){"waitingForScheduledRefetch"===this.authState.state&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=e}decodeToken(e){try{return Y(e)}catch(e){return this._logVerbose(`Error decoding token: ${e instanceof Error?e.message:"Unknown error"}`),null}}_logVerbose(e){this.logger.logVerbose(`${e} [v${this.configVersion}]`)}}let er=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function ei(e){let t=e.name.slice(6);return{name:t=t.charAt(0).toLowerCase()+t.slice(1),startTime:e.startTime}}var es=Object.defineProperty,eo=(e,t,n)=>t in e?es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ea=(e,t,n)=>eo(e,"symbol"!=typeof t?t+"":t,n);class eu{constructor(e,t,n){let i;if(ea(this,"address"),ea(this,"state"),ea(this,"requestManager"),ea(this,"webSocketManager"),ea(this,"authenticationManager"),ea(this,"remoteQuerySet"),ea(this,"optimisticQueryResults"),ea(this,"onTransition"),ea(this,"_nextRequestId"),ea(this,"_sessionId"),ea(this,"firstMessageReceived",!1),ea(this,"debug"),ea(this,"logger"),ea(this,"maxObservedTimestamp"),ea(this,"mark",e=>{if(this.debug){var t;t=this.sessionId,"undefined"!=typeof performance&&performance.mark&&performance.mark(e,{detail:{sessionId:t}})}}),"object"==typeof e)throw Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");n?.skipConvexDeploymentUrlCheck!==!0&&(0,A.R6)(e);let s=(n={...n}).authRefreshTokenLeewaySeconds??2,o=n.webSocketConstructor;if(!o&&"undefined"==typeof WebSocket)throw Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");o=o||WebSocket,this.debug=n.reportDebugInfoToConvex??!1,this.address=e,this.logger=n.logger??c({verbose:n.verbose??!1});let a=e.search("://");if(-1===a)throw Error("Provided address was not an absolute URL.");let u=e.substring(a+3),l=e.substring(0,a);if("http"===l)i="ws";else if("https"===l)i="wss";else throw Error(`Unknown parent protocol ${l}`);let h=`${i}://${u}/api/${r.r}/sync`;this.state=new w,this.remoteQuerySet=new B(e=>this.state.queryPath(e),this.logger),this.requestManager=new k(this.logger),this.authenticationManager=new en(this.state,{authenticate:e=>{let t=this.state.setAuth(e);this.webSocketManager.sendMessage(t)},stopSocket:()=>this.webSocketManager.stop(),restartSocket:()=>this.webSocketManager.restart(),pauseSocket:()=>{this.webSocketManager.pause(),this.state.pause()},resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:s}),this.optimisticQueryResults=new L,this.onTransition=t,this._nextRequestId=0,this._sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});let{unsavedChangesWarning:d}=n;if("undefined"==typeof window||void 0===window.addEventListener){if(!0===d)throw Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else!1!==d&&window.addEventListener("beforeunload",e=>{if(this.requestManager.hasIncompleteRequests()){e.preventDefault();let t="Are you sure you want to leave? Your changes may not be saved.";return(e||window.event).returnValue=t,t}});this.webSocketManager=new J(h,{onOpen:e=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...e,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});let t=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new B(e=>this.state.queryPath(e),this.logger);let[n,r]=this.state.restart(t);for(let e of(r&&this.webSocketManager.sendMessage(r),this.webSocketManager.sendMessage(n),this.requestManager.restart()))this.webSocketManager.sendMessage(e)},onResume:()=>{let[e,t]=this.state.resume();for(let n of(t&&this.webSocketManager.sendMessage(t),e&&this.webSocketManager.sendMessage(e),this.requestManager.resume()))this.webSocketManager.sendMessage(n)},onMessage:e=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),e.type){case"Transition":{this.observedTimestamp(e.endVersion.ts),this.authenticationManager.onTransition(e),this.remoteQuerySet.transition(e),this.state.transition(e);let t=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(t);break}case"MutationResponse":{e.success&&this.observedTimestamp(e.ts);let t=this.requestManager.onResponse(e);null!==t&&this.notifyOnQueryResultChanges(new Set([t]));break}case"ActionResponse":this.requestManager.onResponse(e);break;case"AuthError":this.authenticationManager.onAuthError(e);break;case"FatalError":{let t=function(e,t){let n=`[CONVEX FATAL ERROR] ${t}`;return e.error(n),Error(n)}(this.logger,e.error);throw this.webSocketManager.terminate(),t}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}}},o,this.logger),this.mark("convexClientConstructed")}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(e){(void 0===this.maxObservedTimestamp||this.maxObservedTimestamp.lessThanOrEqual(e))&&(this.maxObservedTimestamp=e)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(e){let t=this.remoteQuerySet.remoteQueryResults(),n=new Map;for(let[e,r]of t){let t=this.state.queryToken(e);if(null!==t){let i={result:r,udfPath:this.state.queryPath(e),args:this.state.queryArgs(e)};n.set(t,i)}}this.onTransition(this.optimisticQueryResults.ingestQueryResultsFromServer(n,e))}setAuth(e,t){this.authenticationManager.setConfig(e,t)}hasAuth(){return this.state.hasAuth()}setAdminAuth(e,t){let n=this.state.setAdminAuth(e,t);this.webSocketManager.sendMessage(n)}clearAuth(){let e=this.state.clearAuth();this.webSocketManager.sendMessage(e)}subscribe(e,t,n){let r=(0,A.Zy)(t),{modification:i,queryToken:s,unsubscribe:o}=this.state.subscribe(e,r,n?.journal,n?.componentPath);return null!==i&&this.webSocketManager.sendMessage(i),{queryToken:s,unsubscribe:()=>{let e=o();e&&this.webSocketManager.sendMessage(e)}}}localQueryResult(e,t){let n=g(e,(0,A.Zy)(t));return this.optimisticQueryResults.queryResult(n)}localQueryResultByToken(e){return this.optimisticQueryResults.queryResult(e)}hasLocalQueryResultByToken(e){return this.optimisticQueryResults.hasQueryResult(e)}localQueryLogs(e,t){let n=g(e,(0,A.Zy)(t));return this.optimisticQueryResults.queryLogs(n)}queryJournal(e,t){let n=g(e,(0,A.Zy)(t));return this.state.queryJournal(n)}connectionState(){return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:"ready"===this.webSocketManager.socketState(),timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest()}}async mutation(e,t,n){let r=await this.mutationInternal(e,t,n);if(!r.success){if(void 0!==r.errorData)throw f(r,new C.i(d("mutation",e,r)));throw Error(d("mutation",e,r))}return r.value}async mutationInternal(e,t,n,r){let s=(0,A.Zy)(t);this.tryReportLongDisconnect();let o=this.nextRequestId;if(this._nextRequestId++,void 0!==n){let e=n.optimisticUpdate;if(void 0!==e){let t=this.optimisticQueryResults.applyOptimisticUpdate(t=>{e(t,s)},o);this.onTransition(t)}}let a={type:"Mutation",requestId:o,udfPath:e,componentPath:r,args:[(0,i.rz)(s)]},u=this.webSocketManager.sendMessage(a);return this.requestManager.request(a,u)}async action(e,t){let n=await this.actionInternal(e,t);if(!n.success){if(void 0!==n.errorData)throw f(n,new C.i(d("action",e,n)));throw Error(d("action",e,n))}return n.value}async actionInternal(e,t,n){let r=(0,A.Zy)(t),s=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();let o={type:"Action",requestId:s,udfPath:e,componentPath:n,args:[(0,i.rz)(r)]},a=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,a)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){let e=function(e){if("undefined"==typeof performance||!performance.getEntriesByName)return[];let t=[];for(let n of er){let r=performance.getEntriesByName(n).filter(e=>"mark"===e.entryType).filter(t=>t.detail.sessionId===e);t.push(...r)}return t.map(ei)}(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:e})}}tryReportLongDisconnect(){if(!this.debug)return;let e=this.connectionState().timeOfOldestInflightRequest;null===e||Date.now()-e.getTime()<=6e4||fetch(`${this.address}/api/debug_event`,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${r.r}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(e=>{e.ok||this.logger.warn("Analytics request failed with response:",e.body)}).catch(e=>{this.logger.warn("Analytics response failed with error:",e)})}}var el=n(2115),ec=n(7650),eh=n(5675),ed=Object.defineProperty,ef=(e,t,n)=>t in e?ed(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ep=(e,t,n)=>ef(e,"symbol"!=typeof t?t+"":t,n);if(void 0===el)throw Error("Required dependency 'react' not found");if(void 0===ec)throw Error("Required dependency 'react-dom' not found");class eg{constructor(e,t){if(ep(this,"address"),ep(this,"cachedSync"),ep(this,"listeners"),ep(this,"options"),ep(this,"closed",!1),ep(this,"_logger"),ep(this,"adminAuth"),ep(this,"fakeUserIdentity"),void 0===e)throw Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if("string"!=typeof e)throw Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof e} instead.`);if(!e.includes("://"))throw Error("Provided address was not an absolute URL.");this.address=e,this.listeners=new Map,this._logger=t?.logger??c({verbose:t?.verbose??!1}),this.options={...t,logger:this._logger}}get sync(){if(this.closed)throw Error("ConvexReactClient has already been closed.");return this.cachedSync||(this.cachedSync=new eu(this.address,e=>this.transition(e),this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity)),this.cachedSync}setAuth(e,t){if("string"==typeof e)throw Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(e,t??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(e,t){if(this.adminAuth=e,this.fakeUserIdentity=t,this.closed)throw Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(e,t)}watchQuery(e,...t){let[n,r]=t,i=(0,R.qQ)(e);return{onUpdate:e=>{let{queryToken:t,unsubscribe:s}=this.sync.subscribe(i,n,r),o=this.listeners.get(t);return void 0!==o?o.add(e):this.listeners.set(t,new Set([e])),()=>{if(this.closed)return;let n=this.listeners.get(t);n.delete(e),0===n.size&&this.listeners.delete(t),s()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(i,n)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(i,n)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(i,n)}}}mutation(e,...t){let[n,r]=t,i=(0,R.qQ)(e);return this.sync.mutation(i,n,r)}action(e,...t){let n=(0,R.qQ)(e);return this.sync.action(n,...t)}query(e,...t){let n=this.watchQuery(e,...t),r=n.localQueryResult();return void 0!==r?Promise.resolve(r):new Promise((e,t)=>{let r=n.onUpdate(()=>{r();try{e(n.localQueryResult())}catch(e){t(e)}})})}connectionState(){return this.sync.connectionState()}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedSync){let e=this.cachedSync;this.cachedSync=void 0,await e.close()}}transition(e){ec.unstable_batchedUpdates(()=>{for(let t of e){let e=this.listeners.get(t);if(e)for(let t of e)t()}})}}let ey=el.createContext(void 0);function em(){return(0,el.useContext)(ey)}let ev=({client:e,children:t})=>el.createElement(ey.Provider,{value:e},t);function ew(e,...t){let n="skip"===t[0],r="skip"===t[0]?{}:(0,A.Zy)(t[0]),s="string"==typeof e?(0,R.Gg)(e):e,o=(0,R.qQ)(s),a=(0,el.useMemo)(()=>n?{}:{query:{query:s,args:r}},[JSON.stringify((0,i.rz)(r)),o,n]),u=(0,eh.E)(a).query;if(u instanceof Error)throw u;return u}function eb(e){let t="string"==typeof e?(0,R.Gg)(e):e,n=(0,el.useContext)(ey);if(void 0===n)throw Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return(0,el.useMemo)(()=>(function e(t,n,r){function i(e){return function(e){if("object"==typeof e&&null!==e&&"bubbles"in e&&"persist"in e&&"isDefaultPrevented"in e)throw Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}(e),n.mutation(t,e,{optimisticUpdate:r})}return i.withOptimisticUpdate=function(i){if(void 0!==r)throw Error(`Already specified optimistic update for mutation ${(0,R.qQ)(t)}`);return e(t,n,i)},i})(t,n),[n,(0,R.qQ)(t)])}},7177:(e,t,n)=>{n.d(t,{n5:()=>a,Yz:()=>o,eH:()=>i.eH,n_:()=>i.n_,IT:()=>i.IT});var r=n(2115);n(2052),n(5675),n(7345);var i=n(9157),s=n(3317);function o({children:e}){let{isLoading:t,isAuthenticated:n}=(0,s.Z)();return t||!n?null:r.createElement(r.Fragment,null,e)}function a({children:e}){let{isLoading:t}=(0,s.Z)();return t?r.createElement(r.Fragment,null,e):null}n(7520)},5675:(e,t,n)=>{n.d(t,{E:()=>d});var r=n(2115),i=n(9157),s=n(2052),o=n(7345),a=Object.defineProperty,u=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,l=(e,t,n)=>u(e,"symbol"!=typeof t?t+"":t,n);class c{constructor(e){l(this,"createWatch"),l(this,"queries"),l(this,"listeners"),this.createWatch=e,this.queries={},this.listeners=new Set}setQueries(e){for(let t of Object.keys(e)){let{query:n,args:r}=e[t];if((0,o.qQ)(n),void 0===this.queries[t])this.addQuery(t,n,r);else{let e=this.queries[t];((0,o.qQ)(n)!==(0,o.qQ)(e.query)||JSON.stringify((0,s.rz)(r))!==JSON.stringify((0,s.rz)(e.args)))&&(this.removeQuery(t),this.addQuery(t,n,r))}}for(let t of Object.keys(this.queries))void 0===e[t]&&this.removeQuery(t)}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}getLocalResults(e){let t={};for(let n of Object.keys(e)){let r;let{query:i,args:s}=e[n];(0,o.qQ)(i);let a=this.createWatch(i,s);try{r=a.localQueryResult()}catch(e){if(e instanceof Error)r=e;else throw e}t[n]=r}return t}setCreateWatch(e){for(let t of(this.createWatch=e,Object.keys(this.queries))){let{query:e,args:n,watch:r}=this.queries[t],i=r.journal();this.removeQuery(t),this.addQuery(t,e,n,i)}}destroy(){for(let e of Object.keys(this.queries))this.removeQuery(e);this.listeners=new Set}addQuery(e,t,n,r){if(void 0!==this.queries[e])throw Error(`Tried to add a new query with identifier ${e} when it already exists.`);let i=this.createWatch(t,n,r),s=i.onUpdate(()=>this.notifyListeners());this.queries[e]={query:t,args:n,watch:i,unsubscribe:s}}removeQuery(e){let t=this.queries[e];if(void 0===t)throw Error(`No query found with identifier ${e}.`);t.unsubscribe(),delete this.queries[e]}notifyListeners(){for(let e of this.listeners)e()}}var h=n(7520);function d(e){let t=(0,i.BN)();if(void 0===t)throw Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return function(e,t){let[n]=(0,r.useState)(()=>new c(t));n.createWatch!==t&&n.setCreateWatch(t),(0,r.useEffect)(()=>()=>n.destroy(),[n]);let i=(0,r.useMemo)(()=>({getCurrentValue:()=>n.getLocalResults(e),subscribe:t=>(n.setQueries(e),n.subscribe(t))}),[n,e]);return(0,h.R)(i)}(e,(0,r.useMemo)(()=>(e,n,r)=>t.watchQuery(e,n,{journal:r}),[t]))}},7520:(e,t,n)=>{n.d(t,{R:()=>i});var r=n(2115);function i({getCurrentValue:e,subscribe:t}){let[n,i]=(0,r.useState)(()=>({getCurrentValue:e,subscribe:t,value:e()})),s=n.value;return(n.getCurrentValue!==e||n.subscribe!==t)&&(s=e(),i({getCurrentValue:e,subscribe:t,value:s})),(0,r.useEffect)(()=>{let n=!1,r=()=>{n||i(n=>{if(n.getCurrentValue!==e||n.subscribe!==t)return n;let r=e();return n.value===r?n:{...n,value:r}})},s=t(r);return r(),()=>{n=!0,s()}},[e,t]),s}},7345:(e,t,n)=>{n.d(t,{Gg:()=>o,dp:()=>a,qQ:()=>s});var r=n(2512),i=n(7340);function s(e){let t=(0,i.Jc)(e);if(void 0===t.name){if(void 0!==t.functionHandle)throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${t.functionHandle}`);if(void 0!==t.reference)throw Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${t.reference}`);throw Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(t)}`)}if("string"==typeof e)return e;let n=e[r.A];if(!n)throw Error(`${e} is not a functionReference`);return n}function o(e){return{[r.A]:e}}let a=function e(t=[]){return new Proxy({},{get(n,i){if("string"==typeof i)return e([...t,i]);if(i===r.A){if(t.length<2){let e=["api",...t].join(".");throw Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${e}\``)}let e=t.slice(0,-1).join("/"),n=t[t.length-1];return"default"===n?e:e+":"+n}return i===Symbol.toStringTag?"FunctionReference":void 0}})}()},7340:(e,t,n)=>{n.d(t,{Jc:()=>s});var r=n(2512);let i=Symbol.for("toReferencePath");function s(e){let t;if("string"==typeof e)t=e.startsWith("function://")?{functionHandle:e}:{name:e};else if(e[r.A])t={name:e[r.A]};else{let n=e[i]??null;if(!n)throw Error(`${e} is not a functionReference`);t={reference:n}}return t}},2512:(e,t,n)=>{n.d(t,{A:()=>r});let r=Symbol.for("functionName")},6171:(e,t,n)=>{n.r(t),n.d(t,{byteLength:()=>c,fromByteArray:()=>d,toByteArray:()=>h});for(var r=[],i=[],s=Uint8Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=o.length;a<u;++a)r[a]=o[a],i[o.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function c(e){var t=l(e),n=t[0],r=t[1];return(n+r)*3/4-r}function h(e){var t,n,r=l(e),o=r[0],a=r[1],u=new s((o+a)*3/4-a),c=0,h=a>0?o-4:o;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function d(e){for(var t,n=e.length,i=n%3,s=[],o=0,a=n-i;o<a;o+=16383)s.push(function(e,t,n){for(var i,s=[],o=t;o<n;o+=3)s.push(r[(i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,o,o+16383>a?a:o+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},3499:(e,t,n)=>{n.d(t,{i:()=>c});var r,i,s=n(1389),o=Object.defineProperty,a=(e,t,n)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t,n)=>a(e,"symbol"!=typeof t?t+"":t,n);let l=Symbol.for("ConvexError");class c extends(i=Error,r=l,i){constructor(e){super("string"==typeof e?e:(0,s.E$)(e)),u(this,"name","ConvexError"),u(this,"data"),u(this,r,!0),this.data=e}}},2052:(e,t,n)=>{n.d(t,{du:()=>r.du,ik:()=>s.i,o4:()=>i,rz:()=>r.rz});var r=n(1389);n(6904);var i=n(6171),s=n(3499)},6904:(e,t,n)=>{n.d(t,{d:()=>x,v:()=>S});var r=n(1389),i=Object.defineProperty,s=(e,t,n)=>t in e?i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>s(e,"symbol"!=typeof t?t+"":t,n);class a{constructor({isOptional:e}){o(this,"type"),o(this,"fieldPaths"),o(this,"isOptional"),o(this,"isConvexValidator"),this.isOptional=e,this.isConvexValidator=!0}get optional(){return"optional"===this.isOptional}}class u extends a{constructor({isOptional:e,tableName:t}){super({isOptional:e}),o(this,"tableName"),o(this,"kind","id"),this.tableName=t}get json(){return{type:"id",tableName:this.tableName}}asOptional(){return new u({isOptional:"optional",tableName:this.tableName})}}class l extends a{constructor(){super(...arguments),o(this,"kind","float64")}get json(){return{type:"number"}}asOptional(){return new l({isOptional:"optional"})}}class c extends a{constructor(){super(...arguments),o(this,"kind","int64")}get json(){return{type:"bigint"}}asOptional(){return new c({isOptional:"optional"})}}class h extends a{constructor(){super(...arguments),o(this,"kind","boolean")}get json(){return{type:this.kind}}asOptional(){return new h({isOptional:"optional"})}}class d extends a{constructor(){super(...arguments),o(this,"kind","bytes")}get json(){return{type:this.kind}}asOptional(){return new d({isOptional:"optional"})}}class f extends a{constructor(){super(...arguments),o(this,"kind","string")}get json(){return{type:this.kind}}asOptional(){return new f({isOptional:"optional"})}}class p extends a{constructor(){super(...arguments),o(this,"kind","null")}get json(){return{type:this.kind}}asOptional(){return new p({isOptional:"optional"})}}class g extends a{constructor(){super(...arguments),o(this,"kind","any")}get json(){return{type:this.kind}}asOptional(){return new g({isOptional:"optional"})}}class y extends a{constructor({isOptional:e,fields:t}){super({isOptional:e}),o(this,"fields"),o(this,"kind","object"),this.fields=t}get json(){return{type:this.kind,value:globalThis.Object.fromEntries(globalThis.Object.entries(this.fields).map(([e,t])=>[e,{fieldType:t.json,optional:"optional"===t.isOptional}]))}}asOptional(){return new y({isOptional:"optional",fields:this.fields})}}class m extends a{constructor({isOptional:e,value:t}){super({isOptional:e}),o(this,"value"),o(this,"kind","literal"),this.value=t}get json(){return{type:this.kind,value:(0,r.rz)(this.value)}}asOptional(){return new m({isOptional:"optional",value:this.value})}}class v extends a{constructor({isOptional:e,element:t}){super({isOptional:e}),o(this,"element"),o(this,"kind","array"),this.element=t}get json(){return{type:this.kind,value:this.element.json}}asOptional(){return new v({isOptional:"optional",element:this.element})}}class w extends a{constructor({isOptional:e,key:t,value:n}){if(super({isOptional:e}),o(this,"key"),o(this,"value"),o(this,"kind","record"),"optional"===t.isOptional)throw Error("Record validator cannot have optional keys");if("optional"===n.isOptional)throw Error("Record validator cannot have optional values");this.key=t,this.value=n}get json(){return{type:this.kind,keys:this.key.json,values:{fieldType:this.value.json,optional:!1}}}asOptional(){return new w({isOptional:"optional",key:this.key,value:this.value})}}class b extends a{constructor({isOptional:e,members:t}){super({isOptional:e}),o(this,"members"),o(this,"kind","union"),this.members=t}get json(){return{type:this.kind,value:this.members.map(e=>e.json)}}asOptional(){return new b({isOptional:"optional",members:this.members})}}function x(e){return!!e.isConvexValidator}let S={id:e=>new u({isOptional:"required",tableName:e}),null:()=>new p({isOptional:"required"}),number:()=>new l({isOptional:"required"}),float64:()=>new l({isOptional:"required"}),bigint:()=>new c({isOptional:"required"}),int64:()=>new c({isOptional:"required"}),boolean:()=>new h({isOptional:"required"}),string:()=>new f({isOptional:"required"}),bytes:()=>new d({isOptional:"required"}),literal:e=>new m({isOptional:"required",value:e}),array:e=>new v({isOptional:"required",element:e}),object:e=>new y({isOptional:"required",fields:e}),record:(e,t)=>new w({isOptional:"required",key:e,value:t}),union:(...e)=>new b({isOptional:"required",members:e}),any:()=>new g({isOptional:"required"}),optional:e=>e.asOptional()}},1389:(e,t,n)=>{n.d(t,{E$:()=>p,cy:()=>w,du:()=>function e(t){if(null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t)return t;if(Array.isArray(t))return t.map(t=>e(t));if("object"!=typeof t)throw Error(`Unexpected type of ${t}`);let n=Object.entries(t);if(1===n.length){let e=n[0][0];if("$bytes"===e){if("string"!=typeof t.$bytes)throw Error(`Malformed $bytes field on ${t}`);return r.toByteArray(t.$bytes).buffer}if("$integer"===e){if("string"!=typeof t.$integer)throw Error(`Malformed $integer field on ${t}`);return d(t.$integer)}if("$float"===e){if("string"!=typeof t.$float)throw Error(`Malformed $float field on ${t}`);let e=r.toByteArray(t.$float);if(8!==e.byteLength)throw Error(`Received ${e.byteLength} bytes, expected 8 for $float`);let n=new DataView(e.buffer).getFloat64(0,!0);if(!c(n))throw Error(`Float ${n} should be encoded as a number`);return n}if("$set"===e)throw Error("Received a Set which is no longer supported as a Convex type.");if("$map"===e)throw Error("Received a Map which is no longer supported as a Convex type.")}let i={};for(let[n,r]of Object.entries(t))f(n),i[n]=e(r);return i},rz:()=>v});var r=n(6171),i=n(7403);let s=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),a=BigInt("0"),u=BigInt("8"),l=BigInt("256");function c(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}let h=DataView.prototype.setBigInt64?function(e){if(e<s||o<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);let t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),r.fromByteArray(new Uint8Array(t))}:function(e){e<a&&(e-=s+s);let t=e.toString(16);t.length%2==1&&(t="0"+t);let n=new Uint8Array(new ArrayBuffer(8)),i=0;for(let r of t.match(/.{2}/g).reverse())n.set([parseInt(r,16)],i++),e>>=u;return r.fromByteArray(n)},d=DataView.prototype.getBigInt64?function(e){let t=r.toByteArray(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}:function(e){let t=r.toByteArray(e);if(8!==t.byteLength)throw Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let n=a,i=a;for(let e of t)n+=BigInt(e)*l**i,i++;return n>o&&(n+=s+s),n};function f(e){if(e.length>1024)throw Error(`Field name ${e} exceeds maximum field name length 1024.`);if(e.startsWith("$"))throw Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){let n=e.charCodeAt(t);if(n<32||n>=127)throw Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function p(e){return JSON.stringify(e,(e,t)=>void 0===t?"undefined":"bigint"==typeof t?`${t.toString()}n`:t)}function g(e,t,n,a){if(void 0===e){let e=n&&` (present at path ${n} in original object ${p(t)})`;throw Error(`undefined is not a valid Convex value${e}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(null===e)return e;if("bigint"==typeof e){if(e<s||o<e)throw Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:h(e)}}if("number"==typeof e){if(!c(e))return e;{let t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),{$float:r.fromByteArray(new Uint8Array(t))}}}if("boolean"==typeof e||"string"==typeof e)return e;if(e instanceof ArrayBuffer)return{$bytes:r.fromByteArray(new Uint8Array(e))};if(Array.isArray(e))return e.map((e,r)=>g(e,t,n+`[${r}]`,!1));if(e instanceof Set)throw Error(y(n,"Set",[...e],t));if(e instanceof Map)throw Error(y(n,"Map",[...e],t));if(!(0,i.iY)(e)){let r=e?.constructor?.name;throw Error(y(n,r?`${r} `:"",e,t))}let u={},l=Object.entries(e);for(let[e,r]of(l.sort(([e,t],[n,r])=>e===n?0:e<n?-1:1),l))void 0!==r?(f(e),u[e]=g(r,t,n+`.${e}`,!1)):a&&(f(e),u[e]=m(r,t,n+`.${e}`));return u}function y(e,t,n,r){return e?`${t}${p(n)} is not a supported Convex type (present at path ${e} in original object ${p(r)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${p(n)} is not a supported Convex type.`}function m(e,t,n){if(void 0===e)return{$undefined:null};if(void 0===t)throw Error(`Programming error. Current value is ${p(e)} but original value is undefined`);return g(e,t,n,!1)}function v(e){return g(e,e,"",!1)}function w(e){return m(e,e,"")}}}]);